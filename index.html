```html
[file name]: Invoice.txt
[file content begin]
Ai Invoice Sitecode


<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  img-src 'self' https: data:;
  style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
  font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com data:;
  script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com https://google-analytics.com https://aqemezlbkktmtbxwqjtk.supabase.co;
  connect-src 'self' https://www.google-analytics.com https://www.googletagmanager.com https://google-analytics.com https://aqemezlbkktmtbxwqjtk.supabase.co;
  base-uri 'self';
  frame-ancestors 'none';
  upgrade-insecure-requests">
<title>Invoice Finder 2026 - Find Your Perfect Invoicing Tool for Freelancers</title>
<meta name="description" content="Find your perfect invoicing tool in 2 clicks. Real freelancer reviews, Top 5 charts, intelligent recommendations for 2026.">
<meta name="keywords" content="invoicing software freelancer, AI invoices, automated invoices, freelancer tools, free invoicing software">
<meta name="google-site-verification" content="Wo_6LQQ8LoGlobalzVMjBHh_Z-VD3N_dFdqCZb2BYxV0" />
<link rel="canonical" href="https://billr-ai.github.io/Ki-Tools-Freelancer/">
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
<meta property="og:type" content="website">
<meta property="og:title" content="Invoice Finder 2026 - Find Your Perfect Invoicing Tool for Freelancers">
<meta property="og:description" content="Find your perfect invoicing tool in 2 clicks. Real freelancer reviews, Top 5 charts, intelligent recommendations.">
<meta property="og:url" content="https://billr-ai.github.io/Ki-Tools-Freelancer/">
<meta property="og:site_name" content="Invoice Finder">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Invoice Finder 2026">
<meta name="twitter:description" content="Find your perfect invoicing tool in 2 clicks">

<!-- Google Analytics - Wird nur nach Cookie-Zustimmung geladen -->
<script>
  // Cookie-Pr√§ferenzen
  window.cookiePreferences = {
    necessary: true,
    analytics: false,
    functional: false,
    marketing: false
  };
  
  // Funktion zum Laden von Google Analytics nach Zustimmung
  function loadGoogleAnalytics() {
    if (window.cookiePreferences.analytics) {
      // Google Analytics Script
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'G-BSC0RCF1MJ', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
      
      // GTM Fallback
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-BSC0RCF1MJ', {
        anonymize_ip: true,
        page_title: document.title,
        page_location: window.location.href,
        page_path: window.location.pathname,
        send_page_view: true
      });
    }
  }
</script>

<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Invoice Finder",
  "url": "https://billr-ai.github.io/Ki-Tools-Freelancer/",
  "description": "Find your perfect invoicing tool for freelancers in 2 clicks. Real user reviews, Top 5 charts, intelligent recommendations.",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://billr-ai.github.io/Ki-Tools-Freelancer/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --primary:#3b82f6;
  --primary-light:#60a5fa;
  --primary-dark:#2563eb;
  --secondary:#10b981;
  --secondary-light:#34d399;
  --secondary-dark:#059669;
  --accent:#38bdf8;
  --danger:#ef4444;
  --danger-light:#f87171;
  --dark:#020617;
  --dark-light:#0f172a;
  --text:#1e293b;
  --text-dark:#0f172a;
  --text-muted:#475569;
  --card-bg:rgba(255, 255, 255, 1);
  --card-border:rgba(203, 213, 225, 0.6);
  --glass:rgba(255,255,255,0.1);
  --shadow:0 8px 20px rgba(0,0,0,0.12);
  --radius:12px;
  --transition:all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --fast-transition:all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}
body{
  font-family:'Inter',sans-serif;
  background:linear-gradient(135deg,#f1f5f9 0%,#e2e8f0 100%);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
  line-height:1.4;
}
.language-switch{position:fixed;top:15px;right:15px;z-index:1000}
.lang-btn{background:white;border:2px solid var(--primary);color:var(--primary);padding:8px 16px;border-radius:var(--radius);cursor:pointer;display:flex;align-items:center;gap:6px;font-weight:600;transition:var(--fast-transition);font-size:0.9rem;box-shadow:var(--shadow)}
.lang-btn:hover{background:var(--primary);color:white;transform:translateY(-2px)}
.header{padding:60px 20px 20px;text-align:center;max-width:1200px;margin:0 auto}
.badge{background:linear-gradient(135deg,var(--primary),var(--accent));color:white;padding:8px 18px;border-radius:20px;font-size:0.9rem;font-weight:600;display:inline-block;margin-bottom:20px;animation:float 3s ease-in-out infinite;box-shadow:0 4px 12px rgba(59,130,246,0.3)}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}
.header h1{font-size:clamp(2rem,4vw,3rem);margin-bottom:16px;line-height:1.1;color:var(--text-dark);font-weight:800}
.header p{font-size:1.1rem;color:var(--text-muted);max-width:600px;margin:0 auto 25px;line-height:1.6}
.search-container{max-width:700px;margin:0 auto 20px;position:relative}
.search-box{width:100%;padding:16px 20px 16px 52px;background:white;border:2px solid var(--card-border);border-radius:var(--radius);color:var(--text);font-size:1rem;transition:var(--fast-transition);box-shadow:var(--shadow)}
.search-box:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(59,130,246,0.1)}
.search-icon{position:absolute;left:18px;top:50%;transform:translateY(-50%);color:var(--primary);font-size:1.2rem}
.search-suggestions{position:absolute;top:100%;left:0;right:0;background:white;border:2px solid var(--primary);border-top:none;border-radius:0 0 var(--radius) var(--radius);max-height:280px;overflow-y:auto;z-index:100;display:none;box-shadow:var(--shadow)}
.search-suggestions.active{display:block}
.suggestion-item{padding:12px 18px;cursor:pointer;transition:var(--fast-transition);display:flex;align-items:center;gap:12px;border-bottom:1px solid var(--card-border)}
.suggestion-item:hover{background:rgba(59,130,246,0.08)}
.suggestion-icon{color:var(--primary);width:20px;font-size:1rem}
.suggestion-text{flex:1;display:flex;flex-direction:column;gap:4px}
.suggestion-name{color:var(--text-dark);font-weight:700;font-size:1rem}
.suggestion-meta{font-size:0.85rem;color:var(--text-muted)}
.search-tips-wrapper{max-width:700px;margin:12px auto 0;position:relative}
.search-tips{display:flex;align-items:center;flex-wrap:wrap;gap:6px;min-height:24px;padding:0 5px}
.search-tips-label{color:var(--text-muted);font-size:0.8rem;margin-right:8px;white-space:nowrap;flex-shrink:0}
.search-tip-item{background:rgba(59,130,246,0.08);padding:3px 10px;border-radius:14px;cursor:pointer;transition:var(--fast-transition);border:1px solid transparent;white-space:nowrap;font-size:0.78rem;flex-shrink:0}
.search-tip-item:hover{background:rgba(59,130,246,0.15);border-color:var(--primary-light);transform:translateY(-1px)}
.search-tip-item.active{background:rgba(59,130,246,0.2);border-color:var(--primary);font-weight:600}
.search-tips-scroll-btn{position:absolute;top:50%;transform:translateY(-50%);background:white;border:1px solid var(--card-border);width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:2;color:var(--primary);font-size:0.7rem;opacity:0.8;transition:var(--fast-transition);box-shadow:0 2px 5px rgba(0,0,0,0.1)}
.search-tips-scroll-btn:hover{opacity:1;background:var(--primary);color:white;border-color:var(--primary)}
.search-tips-scroll-btn.left{left:-30px}
.search-tips-scroll-btn.right{right:-30px}
.search-tips-scroll-btn.hidden{display:none}
.quick-navigation{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;max-width:1200px;margin:0 auto 30px;padding:0 20px}
.quick-card{background:white;border-radius:var(--radius);padding:20px;border:2px solid var(--card-border);display:flex;flex-direction:column;align-items:center;text-align:center;cursor:pointer;box-shadow:var(--shadow)}
.quick-card:hover{transform:translateY(-5px);border-color:var(--primary);box-shadow:0 12px 25px rgba(59,130,246,0.15)}
.quick-card.active{background:linear-gradient(135deg, var(--primary-light), var(--primary));border-color:var(--primary);color:white;}
.quick-card.active .quick-title,
.quick-card.active .quick-desc{color:white;}
.quick-card.active .quick-icon{background:rgba(255,255,255,0.2);color:white;}
.quick-icon{width:48px;height:48px;background:linear-gradient(135deg,var(--primary),var(--accent));border-radius:12px;display:flex;align-items:center;justify-content:center;margin-bottom:15px;font-size:1.4rem;color:white}
.quick-title{font-size:1rem;font-weight:700;color:var(--text-dark);margin-bottom:6px}
.quick-desc{font-size:0.85rem;color:var(--text-muted);line-height:1.4}
.top-charts-section{max-width:1200px;margin:0 auto 30px;padding:0 20px}
.section-title{display:flex;align-items:center;gap:10px;font-size:1.3rem;font-weight:800;color:var(--text-dark);margin-bottom:20px}
.section-title i{color:var(--primary);font-size:1.1rem}
.top-charts{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}
.chart-card{background:white;border-radius:var(--radius);padding:20px;border:2px solid var(--card-border);box-shadow:var(--shadow);transition:transform 0.3s ease, opacity 0.3s ease;cursor:pointer;}
.chart-card.moving-up{border-color:var(--secondary);box-shadow:0 0 0 2px var(--secondary), 0 8px 25px rgba(16,185,129,0.25);}
.chart-card.moving-down{border-color:var(--danger);box-shadow:0 0 0 2px var(--danger), 0 8px 25px rgba(239,68,68,0.25);}
.chart-card.fade-out{opacity:0.4;transform:scale(0.98);}
.chart-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.chart-rank{width:36px;height:36px;background:linear-gradient(135deg,var(--primary),var(--accent));border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1rem;color:white;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
.chart-rank.moving-up{background:linear-gradient(135deg,var(--secondary),var(--secondary-light));transform:scale(1.1);}
.chart-rank.moving-down{background:linear-gradient(135deg,var(--danger),var(--danger-light));transform:scale(1.1);}
.chart-rank.rank-1{background:linear-gradient(135deg:#f59e0b,#d97706)}
.chart-rank.rank-2{background:linear-gradient(135deg:#94a3b8,#64748b)}
.chart-rank.rank-3{background:linear-gradient(135deg:#fbbf24,#f59e0b)}
.chart-votes{display:flex;align-items:center;gap:6px;font-size:0.9rem;color:var(--text-muted)}
.chart-votes i{color:var(--secondary)}
.chart-tool-name{font-weight:800;font-size=1.1rem;color:var(--text-dark);margin-bottom:6px}
.chart-category{font-size=0.8rem;color:var(--primary);font-weight=600;background:rgba(59,130,246,0.1);padding:4px 10px;border-radius=20px;display:inline-block}
.chart-price{font-size=1rem;color:var(--secondary);font-weight=700;margin:10px 0}
.chart-description{font-size=0.9rem;color:var(--text-muted);line-height=1.5;margin-bottom:16px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.chart-pros-cons{margin:12px 0;font-size=0.85rem;}
.pros-list, .cons-list{margin=6px 0;}
.pros-list li:before{content:"‚úì ";color:var(--secondary);font-weight:bold;}
.cons-list li:before{content:"‚úó ";color:var(--danger);font-weight:bold;}
.chart-actions{display:flex;gap:10px}
.vote-btn{flex:1;background:rgba(255,255,255,0.05);border:2px solid var(--card-border);border-radius=8px;padding:12px;cursor:pointer;transition:var(--fast-transition);display:flex;align-items:center;justify-content:center;gap:8px;font-size=1rem;font-weight=600;color:var(--text);-webkit-tap-highlight-color:transparent;user-select:none;}
.vote-btn i{font-size=1.2rem}
.vote-btn.up:hover{background:rgba(16,185,129,0.1);border-color:var(--secondary);color:var(--secondary)}
.vote-btn.down:hover{background:rgba(239,68,68,0.1);border-color:var(--danger);color:var(--danger)}
.vote-btn.active.up{background:rgba(16,185,129,0.15);border-color:var(--secondary);color:var(--secondary)}
.vote-btn.active.down{background:rgba(239,68,68,0.15);border-color:var(--danger);color:var(--danger)}
.vote-btn:active{transform:scale(0.98);}
.vote-count-animation{animation:countChange 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
@keyframes countChange{0%{transform:scale(1);}50%{transform:scale(1.2);}100%{transform:scale(1);}}

.tools-container{max-width:1200px;margin:0 auto;padding:0 20px 50px}
.compact-tools-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:25px;flex-wrap:wrap;gap:15px}
.compact-filters{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
.filter-btn{background:white;border:2px solid var(--card-border);color:var(--text-muted);padding:10px 18px;border-radius=20px;cursor:pointer;display:flex;align-items:center;gap:8px;font-weight=600;transition:var(--fast-transition);white-space:nowrap;font-size=0.9rem}
.filter-btn:hover{border-color:var(--primary);color:var(--primary)}
.filter-btn.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:white;box-shadow:0 4px 12px rgba(59,130,246,0.3)}
.filter-select{padding:10px 35px 10px 15px;background:white;border:2px solid var(--card-border);border-radius=8px;color:var(--text);font-size=0.9rem;transition:var(--fast-transition);cursor:pointer;appearance:none;min-width:160px;font-weight=600}
.filter-select:focus{outline:none;border-color:var(--primary)}
.filter-group{position:relative}
.filter-group::after{content:'‚ñº';position:absolute;right=15px;top:50%;transform:translateY(-50%);color:var(--primary);pointer-events:none;font-size=0.7rem}
.tools-count{font-size=1rem;color:var(--text-muted)}
.tools-count span{color:var(--primary);font-weight=800}
.compact-tools-grid{display:grid;grid-template-columns:1fr;gap:12px}
.compact-tool-row{background:white;border-radius=var(--radius);padding:18px;border:2px solid var(--card-border);transition:var(--fast-transition);display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:15px;box-shadow:var(--shadow);cursor:pointer;}
.compact-tool-row:hover{border-color:var(--primary);transform:translateY(-3px);box-shadow:0 12px 25px rgba(59,130,246,0.1)}
.tool-vote-compact{display:flex;flex-direction:column;align-items:center;gap:8px;min-width=60px}
.vote-count{font-weight:800;font-size=1.1rem;color:var(--text-dark);transition:var(--fast-transition);}
.vote-count.upvoted{color:var(--secondary);}
.vote-count.downvoted{color:var(--danger);}
.vote-btn-compact{background:transparent;border:none;color:var(--text-muted);cursor:pointer;transition:var(--fast-transition);padding:8px;border-radius=6px;font-size=1.4rem;-webkit-tap-highlight-color:transparent;user-select:none;}
.vote-btn-compact:hover{color:var(--primary)}
.vote-btn-compact.active.up{color:var(--secondary)}
.vote-btn-compact.active.down{color:var(--danger)}
.vote-btn-compact:active{transform:scale(0.95);}
.tool-info-compact{overflow:hidden}
.tool-name-row{display:flex;align-items:center;gap:10px;margin-bottom=8px;flex-wrap:wrap}
.tool-name-compact{font-weight:800;font-size=1.1rem;color:var(--text-dark);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.tool-category-compact{font-size=0.75rem;color:var(--primary);font-weight=600;padding:4px 10px;background:rgba(59,130,246,0.1);border-radius=20px;white-space:nowrap}
.tool-desc-compact{font-size=0.9rem;color:var(--text-muted);line-height=1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.tool-pros-cons-compact{font-size=0.85rem;color:var(--text-muted);margin-top:8px;line-height=1.4;}
.tool-pros-cons-compact span{font-weight=600;color:var(--primary);}
.tool-pros-cons-compact .pros{color:var(--secondary);}
.tool-pros-cons-compact .cons{color:var(--danger);}
.tool-meta-compact{display:flex;flex-direction:column;align-items:flex-end;gap:10px;min-width=160px}
.tool-price-compact{font-size=1rem;font-weight=800;color:var(--secondary)}
.tool-link-compact{background:linear-gradient(135deg,var(--primary),var(--accent));color:white;padding:10px 20px;border-radius=8px;text-decoration:none;font-weight=700;transition:var(--fast-transition);font-size=0.9rem;white-space:nowrap;text-align:center;box-shadow:0 4px 10px rgba(59,130,246,0.2)}
.tool-link-compact:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(59,130,246,0.3)}
.empty-state{text-align:center;padding:50px 20px;grid-column:1/-1}
.empty-state i{font-size=3.5rem;color:var(--text-muted);margin-bottom:20px;opacity:0.5}
.empty-state h3{font-size=1.5rem;margin-bottom:15px;color:var(--text-dark)}
.empty-state p{color:var(--text-muted);max-width:400px;margin:0 auto 25px;line-height=1.6;font-size=1rem}
.reset-btn{background:var(--primary);color:white;border:none;padding:12px 24px;border-radius=8px;font-weight=700;cursor:pointer;transition:var(--fast-transition);display:inline-flex;align-items:center;gap:8px;font-size=1rem}
.reset-btn:hover{background:var(--primary-dark);transform:translateY(-2px);box-shadow:0 6px 15px rgba(59,130,246,0.3)}
.footer{text-align:center;padding:40px 20px;border-top:2px solid var(--card-border);margin-top:30px;background:white}
.footer p{color:var(--text-muted);font-size=0.9rem;margin-bottom:8px}
.footer a{color:var(--primary);text-decoration:none;transition:var(--fast-transition);font-size=0.9rem}
.footer a:hover{color:var(--primary-dark);text-decoration:underline}
.scroll-top{position:fixed;bottom:25px;right=25px;background:linear-gradient(135deg,var(--primary),var(--accent));color:white;width:50px;height:50px;border-radius=50%;display:none;align-items:center;justify-content:center;cursor:pointer;transition:var(--fast-transition);z-index:999;box-shadow:0 6px 15px rgba(59,130,246,0.3)}
.scroll-top.visible{display:flex}
.scroll-top:hover{transform:translateY(-3px) scale(1.1)}

/* Tool Detail Popup */
.tool-popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  opacity: 0;
  transition: opacity 0.2s ease;
  padding: 20px;
  overflow-y: auto;
}

.tool-popup-overlay.active {
  display: flex;
  opacity: 1;
}

.tool-popup-content {
  background: white;
  border-radius: var(--radius);
  max-width: 800px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.2s ease, transform 0.2s ease;
  box-shadow: var(--shadow);
}

.tool-popup-overlay.active .tool-popup-content {
  opacity: 1;
  transform: translateY(0);
}

.tool-popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid var(--card-border);
  position: sticky;
  top: 0;
  background: white;
  z-index: 1;
  border-radius: var(--radius) var(--radius) 0 0;
}

.tool-popup-title {
  font-size: 1.5rem;
  font-weight: 800;
  color: var(--text-dark);
}

.tool-popup-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--text-muted);
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: var(--fast-transition);
}

.tool-popup-close:hover {
  background: rgba(239, 68, 68, 0.1);
  color: var(--danger);
}

.tool-popup-body {
  padding: 20px;
}

.tool-popup-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid var(--card-border);
}

.tool-popup-category {
  background: rgba(59, 130, 246, 0.1);
  color: var(--primary);
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
}

.tool-popup-price {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--secondary);
}

.tool-popup-rating {
  display: flex;
  align-items: center;
  gap: 5px;
  color: var(--text-muted);
  font-size: 0.9rem;
}

.tool-popup-rating i {
  color: #fbbf24;
}

.tool-popup-section {
  margin-bottom: 25px;
}

.tool-popup-section h3 {
  font-size: 1.1rem;
  color: var(--text-dark);
  margin-bottom: 10px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 8px;
}

.tool-popup-section h3 i {
  color: var(--primary);
}

.tool-popup-description {
  line-height: 1.6;
  color: var(--text);
  margin-bottom: 15px;
}

.tool-popup-features {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 15px;
}

.tool-popup-feature {
  background: rgba(59, 130, 246, 0.08);
  padding: 8px 14px;
  border-radius: 8px;
  font-size: 0.85rem;
  color: var(--text);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.tool-popup-lists {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 25px;
}

@media (max-width: 768px) {
  .tool-popup-lists {
    grid-template-columns: 1fr;
  }
}

.tool-popup-pros,
.tool-popup-cons {
  padding: 15px;
  border-radius: var(--radius);
}

.tool-popup-pros {
  background: rgba(16, 185, 129, 0.05);
  border: 1px solid rgba(16, 185, 129, 0.2);
}

.tool-popup-cons {
  background: rgba(239, 68, 68, 0.05);
  border: 1px solid rgba(239, 68, 68, 0.2);
}

.tool-popup-pros h4,
.tool-popup-cons h4 {
  font-size: 1rem;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.tool-popup-pros h4 {
  color: var(--secondary);
}

.tool-popup-cons h4 {
  color: var(--danger);
}

.tool-popup-pros ul,
.tool-popup-cons ul {
  list-style: none;
  padding-left: 0;
}

.tool-popup-pros li,
.tool-popup-cons li {
  padding: 5px 0;
  padding-left: 20px;
  position: relative;
}

.tool-popup-pros li:before {
  content: "‚úì";
  position: absolute;
  left: 0;
  color: var(--secondary);
  font-weight: bold;
}

.tool-popup-cons li:before {
  content: "‚úó";
  position: absolute;
  left: 0;
  color: var(--danger);
  font-weight: bold;
}

.tool-popup-use-cases {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.tool-popup-use-case {
  background: rgba(56, 189, 248, 0.1);
  color: var(--accent);
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
}

.tool-popup-actions {
  display: flex;
  gap: 15px;
  padding-top: 20px;
  border-top: 1px solid var(--card-border);
  margin-top: 20px;
}

.tool-popup-link {
  flex: 1;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: white;
  padding: 12px 24px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 700;
  transition: var(--fast-transition);
  text-align: center;
  box-shadow: 0 4px 10px rgba(59, 130, 246, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.tool-popup-link:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(59, 130, 246, 0.3);
}

.tool-popup-votes {
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(59, 130, 246, 0.05);
  padding: 12px 20px;
  border-radius: 8px;
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.tool-popup-votes span {
  font-weight: 700;
  color: var(--text-dark);
}

/* Cookie Banner */
.cookie-banner {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--dark-light);
  color: white;
  padding: 20px;
  z-index: 10000;
  box-shadow: 0 -4px 15px rgba(0,0,0,0.2);
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.cookie-banner.active {
  transform: translateY(0);
}

.cookie-banner-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  align-items: center;
  justify-content: space-between;
}

.cookie-banner-text {
  flex: 1;
  min-width: 300px;
}

.cookie-banner-text h3 {
  margin-bottom: 8px;
  font-size: 1.1rem;
}

.cookie-banner-text p {
  font-size: 0.9rem;
  color: rgba(255,255,255,0.8);
  line-height: 1.5;
}

.cookie-banner-text a {
  color: var(--accent);
  text-decoration: underline;
}

.cookie-banner-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.cookie-btn {
  padding: 10px 24px;
  border-radius: var(--radius);
  font-weight: 600;
  cursor: pointer;
  transition: var(--fast-transition);
  border: none;
  font-size: 0.9rem;
}

.cookie-btn.accept-all {
  background: var(--secondary);
  color: white;
}

.cookie-btn.accept-necessary {
  background: transparent;
  color: white;
  border: 1px solid rgba(255,255,255,0.3);
}

.cookie-btn.settings {
  background: transparent;
  color: white;
  border: 1px solid rgba(255,255,255,0.3);
}

.cookie-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* Cookie Settings Modal */
.cookie-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10001;
  opacity: 0;
  transition: opacity 0.2s ease;
  padding: 20px;
  overflow-y: auto;
}

.cookie-modal-overlay.active {
  display: flex;
  opacity: 1;
}

.cookie-modal-content {
  background: white;
  border-radius: var(--radius);
  max-width: 600px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.2s ease, transform 0.2s ease;
  color: var(--text);
}

.cookie-modal-overlay.active .cookie-modal-content {
  opacity: 1;
  transform: translateY(0);
}

.cookie-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid var(--card-border);
  position: sticky;
  top: 0;
  background: white;
  z-index: 1;
  border-radius: var(--radius) var(--radius) 0 0;
}

.cookie-modal-title {
  font-size: 1.3rem;
  font-weight: 800;
  color: var(--text-dark);
}

.cookie-modal-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--text-muted);
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: var(--fast-transition);
}

.cookie-modal-close:hover {
  background: rgba(239, 68, 68, 0.1);
  color: var(--danger);
}

.cookie-modal-body {
  padding: 20px;
}

.cookie-option {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 15px 0;
  border-bottom: 1px solid var(--card-border);
}

.cookie-option:last-child {
  border-bottom: none;
}

.cookie-option-info {
  flex: 1;
  margin-right: 20px;
}

.cookie-option-title {
  font-weight: 700;
  margin-bottom: 5px;
  color: var(--text-dark);
}

.cookie-option-desc {
  font-size: 0.9rem;
  color: var(--text-muted);
  line-height: 1.5;
}

.cookie-switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 24px;
  flex-shrink: 0;
}

.cookie-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.cookie-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: var(--fast-transition);
  border-radius: 34px;
}

.cookie-slider:before {
  position: absolute;
  content: "";
  height: 16px;
  width: 16px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: var(--fast-transition);
  border-radius: 50%;
}

input:checked + .cookie-slider {
  background-color: var(--secondary);
}

input:checked + .cookie-slider:before {
  transform: translateX(26px);
}

input:disabled + .cookie-slider {
  background-color: #e2e8f0;
  cursor: not-allowed;
}

.cookie-modal-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 25px;
  padding-top: 20px;
  border-top: 1px solid var(--card-border);
}

.cookie-modal-btn {
  padding: 10px 24px;
  border-radius: var(--radius);
  font-weight: 600;
  cursor: pointer;
  transition: var(--fast-transition);
  border: none;
  font-size: 0.9rem;
}

.cookie-modal-btn.save {
  background: var(--primary);
  color: white;
}

.cookie-modal-btn.cancel {
  background: transparent;
  color: var(--text);
  border: 1px solid var(--card-border);
}

.cookie-modal-btn:hover {
  transform: translateY(-2px);
}

/* Legal Pages Styling */
.legal-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10002;
  opacity: 0;
  transition: opacity 0.2s ease;
  padding: 20px;
  overflow-y: auto;
}

.legal-modal-overlay.active {
  display: flex;
  opacity: 1;
}

.legal-modal-content {
  background: white;
  border-radius: var(--radius);
  max-width: 800px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.legal-modal-overlay.active .legal-modal-content {
  opacity: 1;
  transform: translateY(0);
}

.legal-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid var(--card-border);
  position: sticky;
  top: 0;
  background: white;
  z-index: 1;
  border-radius: var(--radius) var(--radius) 0 0;
}

.legal-modal-title {
  font-size: 1.3rem;
  font-weight: 800;
  color: var(--text-dark);
}

.legal-modal-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--text-muted);
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: var(--fast-transition);
}

.legal-modal-close:hover {
  background: rgba(239, 68, 68, 0.1);
  color: var(--danger);
}

.legal-modal-body {
  padding: 20px;
  color: var(--text);
}

.legal-modal-body h2 {
  font-size: 1.2rem;
  margin: 20px 0 10px;
  color: var(--text-dark);
}

.legal-modal-body h3 {
  font-size: 1.1rem;
  margin: 15px 0 8px;
  color: var(--text-dark);
}

.legal-modal-body p {
  margin-bottom: 12px;
  line-height: 1.6;
}

.legal-modal-body ul {
  margin-bottom: 15px;
  padding-left: 20px;
}

.legal-modal-body li {
  margin-bottom: 6px;
  line-height: 1.5;
}

.legal-modal-body a {
  color: var(--primary);
  text-decoration: underline;
}

/* Enhanced Features */
.ai-recommendation-badge {
  background: linear-gradient(135deg, #8b5cf6, #a78bfa);
  color: white;
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
  margin-left: 8px;
  animation: pulse 2s infinite;
}

.trending-indicator {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 0.8rem;
  padding: 3px 8px;
  border-radius: 12px;
  margin-left: 8px;
  font-weight: 600;
}

.trending-up {
  background: rgba(16, 185, 129, 0.1);
  color: var(--secondary);
}

.trending-down {
  background: rgba(239, 68, 68, 0.1);
  color: var(--danger);
}

.smart-filter-tag {
  background: rgba(59, 130, 246, 0.1);
  color: var(--primary);
  padding: 4px 10px;
  border-radius: 16px;
  font-size: 0.8rem;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin-right: 8px;
}

/* Supabase Notification */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  background: var(--primary);
  color: white;
  padding: 15px 20px;
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  gap: 10px;
  z-index: 10000;
  box-shadow: var(--shadow);
  animation: slideIn 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.notification.success {
  background: var(--secondary);
}

.notification.error {
  background: var(--danger);
}

.notification-close {
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  padding: 0;
  font-size: 1rem;
}

@keyframes slideIn {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}

.sync-button {
  background: var(--primary);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: var(--fast-transition);
  margin-left: 15px;
}

.sync-button:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
}

.shared-badge {
  background: linear-gradient(135deg, #8b5cf6, #a78bfa);
  color: white;
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: 600;
  margin-left: 10px;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* Supabase Status - NEUE POSITION im Footer */
.supabase-status {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: rgba(255, 255, 255, 0.9);
  padding: 4px 10px;
  border-radius: var(--radius);
  font-size: 0.75rem;
  border: 1px solid var(--card-border);
  margin-left: 10px;
  vertical-align: middle;
}

.supabase-status.online {
  color: var(--secondary);
}

.supabase-status.offline {
  color: var(--danger);
}

.supabase-status i {
  font-size: 0.7rem;
}

.data-refresh {
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Voting Performance Optimierungen */
.vote-btn-compact,
.vote-btn {
  will-change: transform, color, background-color, border-color;
  backface-visibility: hidden;
}

.vote-count {
  will-change: color, transform;
}

/* Tooltip f√ºr bessere UX */
[data-tooltip] {
  position: relative;
}

[data-tooltip]:before {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--dark);
  color: white;
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 0.75rem;
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s, visibility 0.2s;
  z-index: 1000;
  pointer-events: none;
}

[data-tooltip]:hover:before {
  opacity: 1;
  visibility: visible;
}

/* Performance Optimierungen f√ºr Mobile */
@media (hover: none) {
  .vote-btn-compact:active,
  .vote-btn:active {
    transform: scale(0.95);
  }
  
  .compact-tool-row:active {
    transform: translateY(-1px);
  }
  
  .quick-card:active {
    transform: translateY(-3px);
  }
}

/* Cookie Floating Button */
.cookie-floating-btn {
  position: fixed;
  left: 25px;
  bottom: 25px;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: white;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  box-shadow: var(--shadow);
  transition: var(--fast-transition);
}

.cookie-floating-btn:hover {
  transform: scale(1.1);
}

@media (max-width:768px){
  .header{padding:50px 15px 15px}.header h1{font-size=1.8rem}.header p{font-size=1rem}.quick-navigation{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;padding:0 15px}.top-charts-section{padding:0 15px}.tools-container{padding:0 15px 30px}.compact-tools-header{flex-direction:column;align-items:stretch}.compact-filters{justify-content:center}.compact-tool-row{grid-template-columns:1fr;gap:12px}.tool-meta-compact{flex-direction:row;justify-content:space-between;align-items:center;min-width:auto;margin-top:10px}.tool-vote-compact{flex-direction:row;gap:15px;justify-content:center;min-width:auto;margin-bottom=10px}.search-tips{padding:0 2px;}.search-tip-item{padding:2px 8px;font-size=0.75rem;}.search-tips-scroll-btn{display:none !important;}.search-tips-label{font-size=0.75rem;margin-right=6px;}.sync-button{margin:10px 0 0 0;}.tool-popup-content{max-height:85vh;}.cookie-banner-content{flex-direction:column;text-align:center;}.cookie-banner-actions{justify-content:center;}.supabase-status{margin-left=8px;font-size=0.7rem;padding:3px 8px;}.cookie-floating-btn{left:15px;bottom:80px;}}  
@media (max-width:480px){.header h1{font-size=1.6rem}.search-box{padding:14px 16px 14px 48px;font-size=0.95rem}.quick-navigation{grid-template-columns:1fr 1fr}.top-charts{grid-template-columns:1fr}.compact-tool-row{padding:15px}.vote-btn-compact{font-size=1.2rem}.tool-popup-actions{flex-direction:column;}.cookie-btn{padding:8px 16px;}.supabase-status{display:none;}.cookie-floating-btn{bottom:70px;left:15px;width:40px;height:40px;}}
</style>
</head>
<body>
<div class="language-switch">
<button class="lang-btn" id="langBtn" type="button" aria-label="Switch language">
<i class="fas fa-globe"></i>
<span id="langText">EN</span>
</button>
</div>
<div class="scroll-top" id="scrollTop" aria-label="Scroll to top">
<i class="fas fa-arrow-up"></i>
</div>

<!-- Cookie Floating Button -->
<button class="cookie-floating-btn" id="cookieFloatingBtn" aria-label="Cookie-Einstellungen" type="button">
  <i class="fas fa-cookie-bite"></i>
</button>

<!-- Tool Detail Popup -->
<div class="tool-popup-overlay" id="toolPopup">
  <div class="tool-popup-content">
    <div class="tool-popup-header">
      <h2 class="tool-popup-title" id="popupTitle"></h2>
      <button class="tool-popup-close" id="popupClose">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="tool-popup-body" id="popupBody"></div>
  </div>
</div>

<!-- Cookie Banner -->
<div class="cookie-banner" id="cookieBanner">
  <div class="cookie-banner-content">
    <div class="cookie-banner-text">
      <h3 id="cookieTitle">üç™ Cookie-Einstellungen</h3>
      <p id="cookieText">Wir verwenden Cookies und √§hnliche Technologien, um Ihnen die bestm√∂gliche Erfahrung auf unserer Website zu bieten. Einige Cookies sind technisch notwendig, w√§hrend andere uns helfen, die Nutzung der Website zu analysieren und zu verbessern. Sie k√∂nnen Ihre Einwilligung jederzeit widerrufen. Weitere Informationen finden Sie in unserer <a href="#" id="privacyLink">Datenschutzerkl√§rung</a>.</p>
    </div>
    <div class="cookie-banner-actions">
      <button class="cookie-btn settings" id="cookieSettingsBtn" type="button">Einstellungen</button>
      <button class="cookie-btn accept-necessary" id="cookieNecessaryBtn" type="button">Nur notwendige</button>
      <button class="cookie-btn accept-all" id="cookieAcceptAllBtn" type="button">Alle akzeptieren</button>
    </div>
  </div>
</div>

<!-- Cookie Settings Modal -->
<div class="cookie-modal-overlay" id="cookieModal">
  <div class="cookie-modal-content">
    <div class="cookie-modal-header">
      <h3 class="cookie-modal-title" id="cookieModalTitle">Cookie-Einstellungen</h3>
      <button class="cookie-modal-close" id="cookieModalClose">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="cookie-modal-body">
      <div class="cookie-option">
        <div class="cookie-option-info">
          <div class="cookie-option-title" id="cookieNecessaryTitle">Notwendige Cookies</div>
          <div class="cookie-option-desc" id="cookieNecessaryDesc">Diese Cookies sind f√ºr die grundlegende Funktionalit√§t der Website erforderlich und k√∂nnen nicht deaktiviert werden.</div>
        </div>
        <label class="cookie-switch">
          <input type="checkbox" checked disabled>
          <span class="cookie-slider"></span>
        </label>
      </div>
      <div class="cookie-option">
        <div class="cookie-option-info">
          <div class="cookie-option-title" id="cookieAnalyticsTitle">Analytics Cookies</div>
          <div class="cookie-option-desc" id="cookieAnalyticsDesc">Diese Cookies helfen uns zu verstehen, wie Besucher mit unserer Website interagieren, indem sie Informationen anonym sammeln und melden.</div>
        </div>
        <label class="cookie-switch">
          <input type="checkbox" id="analyticsCookies">
          <span class="cookie-slider"></span>
        </label>
      </div>
      <div class="cookie-option">
        <div class="cookie-option-info">
          <div class="cookie-option-title" id="cookieFunctionalTitle">Funktionale Cookies</div>
          <div class="cookie-option-desc" id="cookieFunctionalDesc">Diese Cookies erm√∂glichen erweiterte Funktionen wie das Speichern Ihrer Spracheinstellungen und Pr√§ferenzen.</div>
        </div>
        <label class="cookie-switch">
          <input type="checkbox" id="functionalCookies">
          <span class="cookie-slider"></span>
        </label>
      </div>
      <div class="cookie-option">
        <div class="cookie-option-info">
          <div class="cookie-option-title" id="cookieMarketingTitle">Marketing Cookies</div>
          <div class="cookie-option-desc" id="cookieMarketingDesc">Diese Cookies werden verwendet, um Besuchern auf anderen Websites relevante Werbung anzuzeigen.</div>
        </div>
        <label class="cookie-switch">
          <input type="checkbox" id="marketingCookies">
          <span class="cookie-slider"></span>
        </label>
      </div>
      <div class="cookie-modal-actions">
        <button class="cookie-modal-btn cancel" id="cookieModalCancel" type="button">Abbrechen</button>
        <button class="cookie-modal-btn save" id="cookieModalSave" type="button">Einstellungen speichern</button>
      </div>
    </div>
  </div>
</div>

<!-- Privacy Policy Modal -->
<div class="legal-modal-overlay" id="privacyModal">
  <div class="legal-modal-content">
    <div class="legal-modal-header">
      <h3 class="legal-modal-title" id="privacyModalTitle">Datenschutzerkl√§rung</h3>
      <button class="legal-modal-close" id="privacyModalClose">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="legal-modal-body" id="privacyModalBody">
      <!-- Content will be filled by JavaScript -->
    </div>
  </div>
</div>

<!-- Imprint Modal -->
<div class="legal-modal-overlay" id="imprintModal">
  <div class="legal-modal-content">
    <div class="legal-modal-header">
      <h3 class="legal-modal-title" id="imprintModalTitle">Impressum</h3>
      <button class="legal-modal-close" id="imprintModalClose">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="legal-modal-body" id="imprintModalBody">
      <!-- Content will be filled by JavaScript -->
    </div>
  </div>
</div>

<header class="header">
<div class="badge" id="badgeText">üöÄ 16 Rechnungs-Tools f√ºr 2026</div>
<h1 id="pageTitle">Finde sofort dein perfektes Rechnungs-Tool</h1>
<p id="pageDescription">Echte Freelancer-Bewertungen, Top 5 Charts, intelligente Empfehlungen. Kein unn√∂tiges Scrollen.</p>
<div class="search-container">
<i class="fas fa-search search-icon"></i>
<input type="text" class="search-box" id="searchInput" autocomplete="off" placeholder="Was m√∂chtest du mit deiner Rechnungssoftware erreichen?">
<div class="search-suggestions" id="searchSuggestions" role="listbox"></div>
</div>
<div class="search-tips-wrapper">
<div class="search-tips" id="searchTips">
<span class="search-tips-label" id="searchTipsLabel">Suche nach:</span>
</div>
<button class="search-tips-scroll-btn left hidden" id="scrollLeftBtn">
<i class="fas fa-chevron-left"></i>
</button>
<button class="search-tips-scroll-btn right hidden" id="scrollRightBtn">
<i class="fas fa-chevron-right"></i>
</button>
</div>
</header>
<section class="quick-navigation" id="quickNav">
<div class="quick-card" data-usecase="automation">
<div class="quick-icon"><i class="fas fa-robot"></i></div>
<div class="quick-title" id="navAuto">Automatisierung</div>
<div class="quick-desc" id="navAutoDesc">Automatische Erinnerungen, wiederkehrende Rechnungen</div>
</div>
<div class="quick-card" data-usecase="time-tracking">
<div class="quick-icon"><i class="fas fa-clock"></i></div>
<div class="quick-title" id="navTime">Zeiterfassung</div>
<div class="quick-desc" id="navTimeDesc">Zeit tracken & direkt in Rechnungen umwandeln</div>
</div>
<div class="quick-card" data-usecase="international">
<div class="quick-icon"><i class="fas fa-globe"></i></div>
<div class="quick-title" id="navIntl">International</div>
<div class="quick-desc" id="navIntlDesc">Mehrere W√§hrungen, internationale Steuern</div>
</div>
<div class="quick-card" data-usecase="mobile">
<div class="quick-icon"><i class="fas fa-mobile-alt"></i></div>
<div class="quick-title" id="navMobile">Mobile First</div>
<div class="quick-desc" id="navMobileDesc">Rechnungen unterwegs erstellen</div>
</div>
<div class="quick-card" data-usecase="contracts">
<div class="quick-icon"><i class="fas fa-file-contract"></i></div>
<div class="quick-title" id="navContract">Vertr√§ge</div>
<div class="quick-desc" id="navContractDesc">Vertr√§ge & Rechnungen kombinieren</div>
</div>
<div class="quick-card" data-category="free">
<div class="quick-icon"><i class="fas fa-gift"></i></div>
<div class="quick-title" id="navFree">Kostenlos</div>
<div class="quick-desc" id="navFreeDesc">Top kostenlose Rechnungs-Tools</div>
</div>
</section>
<section class="top-charts-section">
<div class="section-title">
<i class="fas fa-trophy"></i>   
<span id="topChartsTitle">Top 5 Rechnungs-Tools - Community Ranking</span>
<span class="shared-badge">LIVE</span>
</div>
<div class="top-charts" id="topCharts"></div>
</section>

<section class="tools-container">
<div class="compact-tools-header">
<div class="compact-filters">
<button class="filter-btn active" data-scope="all" type="button"><i class="fas fa-globe"></i> <span id="catAll">Alle</span></button>
<button class="filter-btn" data-category="basic" type="button"><i class="fas fa-file-invoice"></i> <span id="catBasic">Basic</span></button>
<button class="filter-btn" data-category="advanced" type="button"><i class="fas fa-chart-line"></i> <span id="catAdvanced">Advanced</span></button>
<button class="filter-btn" data-category="mobile" type="button"><i class="fas fa-mobile-alt"></i> <span id="catMobile">Mobile</span></button>
<button class="filter-btn" data-category="all-in-one" type="button"><i class="fas fa-box"></i> <span id="catAllInOne">All-in-One</span></button>
<button class="filter-btn" data-category="enterprise" type="button"><i class="fas fa-building"></i> <span id="catEnterprise">Enterprise</span></button>
</div>
<div class="compact-filters">
<div class="filter-group">
<select id="priceFilter" class="filter-select"></select>
</div>
<div class="filter-group">
<select id="sortFilter" class="filter-select"></select>
</div>
<button class="sync-button" id="refreshDataBtn">
<i class="fas fa-sync-alt"></i> <span id="refreshText">Aktualisieren</span>
</button>
</div>
<div class="tools-count"><span id="toolCount">16</span> <span id="toolsText">Tools</span></div>
</div>
<div class="compact-tools-grid" id="toolsGrid"></div>
</section>

<footer class="footer">
<p id="footerCopy">¬© 2026 Invoice Finder | Community-gest√ºtzte Rechnungs-Tool Empfehlungen</p>
<p id="footerDiscl">Bewertungen basieren auf User-Feedback (Supabase). Alle Daten werden mit allen Nutzern geteilt.</p>
<p>
<a href="#" id="imprintLink"><i class="fas fa-building"></i> Impressum</a> | 
<a href="#" id="privacyFooterLink"><i class="fas fa-shield-alt"></i> Datenschutz</a> | 
<a href="#" id="cookieSettingsLink"><i class="fas fa-cookie-bite"></i> Cookie-Einstellungen</a>
<span class="supabase-status online" id="supabaseStatusFooter">
  <i class="fas fa-database"></i> <span>Supabase: verbunden</span>
</span>
</p>
</footer>

<script>
// Supabase Konfiguration
const SUPABASE_URL = 'https://aqemezlbkktmtbxwqjtk.supabase.co';
const SUPABASE_ANON_KEY = 'sb_publishable_lqM39_8HE_4I_vAi5-4iKA_2jKZZbkH';

// Invoice Tools Database - ALL 16 TOOLS
let invoiceTools = [
{
  id:1,
  name:"FreshBooks",
  category:"advanced",
  price:"paid",
  priceDisplay:{de:"ab 19‚Ç¨/Monat", en:"from $19/month"},
  rating:4.8,
  description:{de:"F√ºhrende L√∂sung f√ºr professionelle Freelancer mit Automatisierung.", en:"Leading solution for professional freelancers with automation."},
  detailedDescription:{de:"FreshBooks ist eine cloud-basierte Rechnungssoftware speziell f√ºr Freelancer und kleine Unternehmen. Sie bietet umfangreiche Automatisierungsfunktionen, professionelle Rechnungsvorlagen und eine intuitive Benutzeroberfl√§che.", en:"FreshBooks is a cloud-based invoicing software specifically for freelancers and small businesses. It offers extensive automation features, professional invoice templates, and an intuitive user interface."},
  features:["Auto-Erinnerungen","Zeiterfassung","Kundenportal"],
  pros:{de:["Sehr benutzerfreundlich", "Exzellente Automatisierung", "Gute Mobile Apps"], en:["Very user-friendly", "Excellent automation", "Good mobile apps"]},
  cons:{de:["Teurer als Alternativen", "Begrenzte Buchhaltungsfunktionen"], en:["More expensive than alternatives", "Limited accounting features"]},
  link:"https://freshbooks.com/",
  badge:"popular",
  useCases:["automation","time-tracking","international"],
  votes:0,
  userVote:0,
  trending:"up"
},
{
  id:2,
  name:"Wave",
  category:"basic",
  price:"free",
  priceDisplay:{de:"Kostenlos", en:"Free forever"},
  rating:4.5,
  description:{de:"100% kostenlose Rechnungen mit integrierter Buchhaltung.", en:"100% free invoices with integrated accounting."},
  detailedDescription:{de:"Wave ist eine komplett kostenlose Rechnungssoftware mit integrierten Buchhaltungsfunktionen. Perfekt f√ºr Startups und Freelancer mit kleinem Budget.", en:"Wave is a completely free invoicing software with integrated accounting features. Perfect for startups and freelancers on a tight budget."},
  features:["Unbegrenzt","Buchhaltung","Bankverbindung"],
  pros:{de:["Komplett kostenlos", "Integrierte Buchhaltung", "Gute Grundfunktionen"], en:["Completely free", "Integrated accounting", "Good basic features"]},
  cons:{de:["Weniger Automatisierung", "Customer Support nur per Email"], en:["Less automation", "Customer support only via email"]},
  link:"https://waveapps.com/",
  badge:"popular",
  useCases:["basic","free"],
  votes:0,
  userVote:0,
  trending:"stable"
},
{
  id:3,
  name:"Bonsai",
  category:"all-in-one",
  price:"paid",
  priceDisplay:{de:"ab 17‚Ç¨/Monat", en:"from $17/month"},
  rating:4.9,
  description:{de:"All-in-One Suite mit Vertr√§gen, Angeboten & Rechnungen.", en:"All-in-One suite with contracts, proposals & invoices."},
  detailedDescription:{de:"Bonsai kombiniert Rechnungen, Vertr√§ge, Angebote und Zeiterfassung in einer Plattform. Speziell f√ºr Freelancer entwickelt, die alle Gesch√§ftsprozesse verwalten m√ºssen.", en:"Bonsai combines invoices, contracts, proposals and time tracking in one platform. Specifically developed for freelancers who need to manage all business processes."},
  features:["Vertr√§ge","Angebote","Steuern"],
  pros:{de:["Alles-in-einem Tool", "Automatische Zahlungserinnerungen", "Professionelle Vertragsvorlagen"], en:["All-in-one tool", "Automatic payment reminders", "Professional contract templates"]},
  cons:{de:["Etwas teurer", "Steuerfunktionen nur f√ºr USA/Kanada"], en:["Slightly more expensive", "Tax features only for USA/Canada"]},
  link:"https://hellobonsai.com/",
  badge:"popular",
  useCases:["contracts","automation","time-tracking"],
  votes:0,
  userVote:0,
  trending:"up"
},
{
  id:4,
  name:"Zoho Invoice",
  category:"advanced",
  price:"freemium",
  priceDisplay:{de:"Kostenlos/Bezahlt", en:"Free/Paid"},
  rating:4.4,
  description:{de:"Beste internationale L√∂sung mit 100+ W√§hrungen.", en:"Best international solution with 100+ currencies."},
  detailedDescription:{de:"Zoho Invoice ist Teil der Zoho Suite und bietet exzellente internationale Funktionen. Unterst√ºtzt √ºber 100 W√§hrungen und ist in mehreren Sprachen verf√ºgbar.", en:"Zoho Invoice is part of the Zoho Suite and offers excellent international features. Supports over 100 currencies and is available in multiple languages."},
  features:["100+ W√§hrungen","Mehrsprachig","Steuer-Konform"],
  pros:{de:["Exzellente internationale Unterst√ºtzung", "Gute Integration in Zoho-√ñkosystem", "Flexible Preismodelle"], en:["Excellent international support", "Good integration with Zoho ecosystem", "Flexible pricing models"]},
  cons:{de:["Komplexere Einrichtung", "Mobil-Apps weniger intuitiv"], en:["More complex setup", "Mobile apps less intuitive"]},
  link:"https://go.zoho.com/IB42",
  badge:"new",
  useCases:["international","automation"],
  votes:0,
  userVote:0,
  trending:"stable"
},
{
  id:5,
  name:"Invoyce",
  category:"mobile",
  price:"freemium",
  priceDisplay:{de:"~1% Transaktionsgeb√ºhr", en:"~1% transaction fee"},
  rating:4.7,
  description:{de:"Mobile-First KI Rechnungen mit Beleg-Scanning.", en:"Mobile-first AI invoices with receipt scanning."},
  detailedDescription:{de:"Invoyce ist eine mobile-first Rechnungssoftware mit KI-Funktionen. Scan Belege und erstelle automatisch Rechnungen. Ideal f√ºr unterwegs arbeitende Freelancer.", en:"Invoyce is a mobile-first invoicing software with AI features. Scan receipts and create invoices automatically. Ideal for freelancers working on the go."},
  features:["KI","Mobile","Offline"],
  pros:{de:["Beste Mobile Experience", "KI-gest√ºtzte Belegverarbeitung", "Schnelle Rechnungserstellung"], en:["Best mobile experience", "AI-powered receipt processing", "Fast invoice creation"]},
  cons:{de:["Web-Version weniger umfangreich", "Transaktionsgeb√ºhren f√ºr Zahlungen"], en:["Web version less comprehensive", "Transaction fees for payments"]},
  link:"https://invoyce.ai/",
  badge:"new",
  useCases:["mobile","automation"],
  votes:0,
  userVote:0,
  trending:"up"
},
{
  id:6,
  name:"QuickBooks",
  category:"enterprise",
  price:"paid",
  priceDisplay:{de:"ab 25‚Ç¨/Monat", en:"from $25/month"},
  rating:4.7,
  description:{de:"Komplette Buchhaltung f√ºr wachsende Unternehmen.", en:"Complete accounting for growing businesses."},
  detailedDescription:{de:"QuickBooks ist eine umfassende Buchhaltungssoftware mit integrierten Rechnungsfunktionen. Ideal f√ºr Unternehmen, die Rechnungswesen und Buchhaltung kombinieren m√ºssen.", en:"QuickBooks is a comprehensive accounting software with integrated invoicing features. Ideal for businesses that need to combine invoicing and accounting."},
  features:["Buchhaltung","Steuern","Payroll"],
  pros:{de:["Sehr umfangreiche Buchhaltungsfunktionen", "Gute Steuer-Tools", "Skaliert mit Unternehmenswachstum"], en:["Very comprehensive accounting functions", "Good tax tools", "Scales with business growth"]},
  cons:{de:["√úberw√§ltigend f√ºr reine Rechnungsstellung", "Teuer f√ºr kleine Freelancer"], en:["Overwhelming for pure invoicing", "Expensive for small freelancers"]},
  link:"https://quickbooks.intuit.com/",
  badge:"popular",
  useCases:["advanced","international"],
  votes:0,
  userVote:0,
  trending:"stable"
},
{
  id:7,
  name:"Invoicer.ai",
  category:"basic",
  price:"freemium",
  priceDisplay:{de:"ab 9‚Ç¨/Monat", en:"from $9/month"},
  rating:4.6,
  description:{de:"Schnelle KI-Rechnungen in unter 30 Sekunden.", en:"Fast AI invoices in under 30 seconds."},
  detailedDescription:{de:"Invoicer.ai verwendet KI, um Rechnungen in Sekundenschnelle zu erstellen. Einfache Benutzeroberfl√§che und schnelle Erstellung von wiederkehrenden Rechnungen.", en:"Invoicer.ai uses AI to create invoices in seconds. Simple user interface and quick creation of recurring invoices."},
  features:["Schnell","KI Autocomplete","Batch"],
  pros:{de:["Extrem schnelle Rechnungserstellung", "KI-Vorschl√§ge sparen Zeit", "Einfache Bedienung"], en:["Extremely fast invoice creation", "AI suggestions save time", "Easy to use"]},
  cons:{de:["Begrenzte Anpassungsm√∂glichkeiten", "Keine integrierte Zeiterfassung"], en:["Limited customization options", "No integrated time tracking"]},
  link:"https://invoicer.ai/",
  badge:"new",
  useCases:["automation","basic"],
  votes:0,
  userVote:0,
  trending:"up"
},
{
  id:8,
  name:"Billdu",
  category:"mobile",
  price:"freemium",
  priceDisplay:{de:"Kostenlos/ab 9‚Ç¨", en:"Free/from $9"},
  rating:4.3,
  description:{de:"Rechnungen & Angebote mit Online-Zahlungen.", en:"Invoices & quotes with online payments."},
  detailedDescription:{de:"Billdu bietet Rechnungen, Angebote und Online-Zahlungen in einer App. Gute Mobile-Apps und Offline-Funktionalit√§t.", en:"Billdu offers invoices, quotes and online payments in one app. Good mobile apps and offline functionality."},
  features:["Angebote","Zahlungen","Mobile"],
  pros:{de:["Integrierte Online-Zahlungen", "Gute Offline-Funktionalit√§t", "Angebotsfunktion inklusive"], en:["Integrated online payments", "Good offline functionality", "Quote feature included"]},
  cons:{de:["Design etwas veraltet", "Begrenzte Automatisierung"], en:["Design somewhat outdated", "Limited automation"]},
  link:"https://www.billdu.com/",
  badge:"free",
  useCases:["mobile","basic"],
  votes:0,
  userVote:0,
  trending:"stable"
},
{
  id:9,
  name:"Pancake",
  category:"basic",
  price:"one-time",
  priceDisplay:{de:"Einmalzahlung 99‚Ç¨", en:"One-time $99"},
  rating:4.4,
  description:{de:"Self-hosted L√∂sung f√ºr volle Kontrolle.", en:"Self-hosted solution for full control."},
  detailedDescription:{de:"Pancake ist eine Self-Hosted Rechnungssoftware, die du auf deinem eigenen Server installierst. Einmalige Zahlung, lebenslange Updates. Volle Kontrolle √ºber deine Daten.", en:"Pancake is a self-hosted invoicing software that you install on your own server. One-time payment, lifetime updates. Full control over your data."},
  features:["Self-hosted","Lifetime","Kontrolle"],
  pros:{de:["Einmalige Zahlung, keine monatlichen Kosten", "Volle Datenkontrolle", "Anpassbar an eigene Bed√ºrfnisse"], en:["One-time payment, no monthly costs", "Full data control", "Customizable to own needs"]},
  cons:{de:["Selbst gehostet = eigene Wartung n√∂tig", "Kein automatisches Backup", "Keine Mobile Apps"], en:["Self-hosted = own maintenance required", "No automatic backup", "No mobile apps"]},
  link:"https://pancakeapp.com/",
  badge:"free",
  useCases:["basic"],
  votes:0,
  userVote:0,
  trending:"down"
},
{
  id:10,
  name:"Harvest",
  category:"advanced",
  price:"freemium",
  priceDisplay:{de:"ab 12‚Ç¨/Monat", en:"from $12/month"},
  rating:4.5,
  description:{de:"Zeiterfassung & Rechnungen kombiniert.", en:"Time tracking & invoices combined."},
  detailedDescription:{de:"Harvest kombiniert Zeiterfassung und Rechnungsstellung nahtlos. Ideal f√ºr Freelancer, die nach Stunden abrechnen und Zeit direkt in Rechnungen umwandeln m√∂chten.", en:"Harvest seamlessly combines time tracking and invoicing. Ideal for freelancers who bill by the hour and want to convert time directly into invoices."},
  features:["Zeiterfassung","Projekte","Berichte"],
  pros:{de:["Perfekte Zeit-Rechnung-Integration", "Exzellente Berichte", "Einfache Bedienung"], en:["Perfect time-invoice integration", "Excellent reports", "Easy to use"]},
  cons:{de:["Teurer f√ºr Teams", "Begrenzte Rechnungsvorlagen"], en:["More expensive for teams", "Limited invoice templates"]},
  link:"https://www.getharvest.com/",
  badge:"popular",
  useCases:["time-tracking","automation"],
  votes:0,
  userVote:0,
  trending:"stable"
},
{
  id:11,
  name:"Debitoor",
  category:"basic",
  price:"freemium",
  priceDisplay:{de:"Kostenlos/ab 9‚Ç¨", en:"Free/from $9"},
  rating:4.2,
  description:{de:"Einfache L√∂sung f√ºr deutsche Freelancer.", en:"Simple solution for German freelancers."},
  detailedDescription:{de:"Debitoor ist eine einfache Rechnungssoftware speziell f√ºr den deutschen Markt. Enth√§lt deutsche Steuerformulare und ist auf Kleinunternehmer ausgelegt.", en:"Debitoor is a simple invoicing software specifically for the German market. Includes German tax forms and is designed for small businesses."},
  features:["Deutsch","Einfach","Umsatzsteuer"],
  pros:{de:["Optimiert f√ºr deutschen Markt", "Einfache Bedienung", "Guter Kundensupport auf Deutsch"], en:["Optimized for German market", "Easy to use", "Good customer support in German"]},
  cons:{de:["Weniger internationale Funktionen", "Design nicht modern"], en:["Fewer international features", "Design not modern"]},
  link:"https://debitoor.de/",
  badge:"free",
  useCases:["basic"],
  votes:0,
  userVote:0,
  trending:"down"
},
{
  id:12,
  name:"FastBill",
  category:"advanced",
  price:"paid",
  priceDisplay:{de:"ab 9‚Ç¨/Monat", en:"from $9/month"},
  rating:4.3,
  description:{de:"Deutsche L√∂sung mit DATEV Integration.", en:"German solution with DATEV integration."},
  detailedDescription:{de:"FastBill ist eine deutsche Rechnungssoftware mit DATEV-Integration. Ideal f√ºr Freelancer, die mit Steuerberatern zusammenarbeiten.", en:"FastBill is a German invoicing software with DATEV integration. Ideal for freelancers who work with tax advisors."},
  features:["DATEV","Deutsch","Automatisch"],
  pros:{de:["DATEV-Integration f√ºr Steuerberater", "Gute Automatisierungsfunktionen", "Deutsche Compliance"], en:["DATEV integration for tax advisors", "Good automation features", "German compliance"]},
  cons:{de:["Komplexere Bedienung", "Teurer f√ºr umfangreiche Funktionen"], en:["More complex operation", "More expensive for extensive features"]},
  link:"https://www.fastbill.com/",
  badge:"popular",
  useCases:["automation","advanced"],
  votes:0,
  userVote:0,
  trending:"stable"
},
{
  id:13,
  name:"And Co",
  category:"all-in-one",
  price:"freemium",
  priceDisplay:{de:"Kostenlos/Bezahlt", en:"Free/Paid"},
  rating:4.6,
  description:{de:"Von Fiverr: Alles f√ºr Freelancer in einer App.", en:"By Fiverr: Everything for freelancers in one app."},
  detailedDescription:{de:"And Co (von Fiverr) kombiniert Rechnungen, Vertr√§ge, Zeiterfassung und Projektmanagement. Speziell f√ºr Freelancer-Plattformen optimiert.", en:"And Co (by Fiverr) combines invoices, contracts, time tracking and project management. Optimized specifically for freelancer platforms."},
  features:["Proposals","Contracts","Time"],
  pros:{de:["Perfekt f√ºr Fiverr-Freelancer", "All-in-One L√∂sung", "Gute Integrationen"], en:["Perfect for Fiverr freelancers", "All-in-one solution", "Good integrations"]},
  cons:{de:["Kostenpflichtige Features n√∂tig f√ºr volle Funktionalit√§t", "Weniger flexibel f√ºr Nicht-Fiverr-Nutzer"], en:["Paid features needed for full functionality", "Less flexible for non-Fiverr users"]},
  link:"https://www.and.co/",
  badge:"new",
  useCases:["contracts","time-tracking","automation"],
  votes:0,
  userVote:0,
  trending:"up"
},
{
  id:14,
  name:"PandaDoc",
  category:"all-in-one",
  price:"paid",
  priceDisplay:{de:"ab 19‚Ç¨/Monat", en:"from $19/month"},
  rating:4.5,
  description:{de:"Dokumente, Vertr√§ge & eSignatures mit Tracking.", en:"Documents, contracts & eSignatures with tracking."},
  detailedDescription:{de:"PandaDoc fokussiert sich auf dokumentenbasierte Workflows mit eSignatures. Ideal f√ºr Unternehmen, die Vertr√§ge und Rechnungen mit Unterschriften kombinieren.", en:"PandaDoc focuses on document-based workflows with eSignatures. Ideal for businesses that combine contracts and invoices with signatures."},
  features:["Dokumente","eSign","Tracking"],
  pros:{de:["Exzellente eSignature-Funktionen", "Dokumenten-Tracking", "Professionelle Vorlagen"], en:["Excellent eSignature features", "Document tracking", "Professional templates"]},
  cons:{de:["Teurer f√ºr kleine Teams", "Steile Lernkurve"], en:["Expensive for small teams", "Steep learning curve"]},
  link:"https://www.pandadoc.com/",
  badge:"popular",
  useCases:["contracts","automation"],
  votes:0,
  userVote:0,
  trending:"stable"
},
{
  id:15,
  name:"Xero",
  category:"enterprise",
  price:"paid",
  priceDisplay:{de:"ab 12‚Ç¨/Monat", en:"from $12/month"},
  rating:4.6,
  description:{de:"Cloud-Buchhaltung f√ºr kleine Unternehmen.", en:"Cloud accounting for small businesses."},
  detailedDescription:{de:"Xero ist eine Cloud-Buchhaltungssoftware mit starken Rechnungsfunktionen. Besonders beliebt bei kleinen Unternehmen und Startups.", en:"Xero is a cloud accounting software with strong invoicing features. Particularly popular with small businesses and startups."},
  features:["Banking","Payroll","Reports"],
  pros:{de:["Exzellente Buchhaltungsfunktionen", "Gute Bankintegration", "Starke Berichte"], en:["Excellent accounting functions", "Good bank integration", "Strong reports"]},
  cons:{de:["F√ºr reine Rechnungsstellung √ºberdimensioniert", "Komplexe Einrichtung"], en:["Overkill for pure invoicing", "Complex setup"]},
  link:"https://www.xero.com/",
  badge:"popular",
  useCases:["advanced","international"],
  votes:0,
  userVote:0,
  trending:"up"
},
{
  id:16,
  name:"SlimInvoice",
  category:"basic",
  price:"freemium",
  priceDisplay:{de:"Kostenlos/ab 5‚Ç¨", en:"Free/from $5"},
  rating:4.1,
  description:{de:"Minimalistische Rechnungen mit KI-Vorschl√§gen.", en:"Minimalist invoices with AI suggestions."},
  detailedDescription:{de:"SlimInvoice ist eine minimalistische Rechnungssoftware mit KI-Unterst√ºtzung. Fokussiert auf das Wesentliche ohne √ºberfl√ºssige Funktionen.", en:"SlimInvoice is a minimalist invoicing software with AI support. Focused on the essentials without unnecessary features."},
  features:["Minimal","KI","Schnell"],
  pros:{de:["Sehr einfache Bedienung", "Schnelle Rechnungserstellung", "G√ºnstige Preise"], en:["Very easy to use", "Fast invoice creation", "Low prices"]},
  cons:{de:["Sehr begrenzte Funktionen", "Keine Mobile Apps", "Weniger professionelle Vorlagen"], en:["Very limited features", "No mobile apps", "Less professional templates"]},
  link:"https://slimvoice.co/",
  badge:"free",
  useCases:["basic","automation"],
  votes:0,
  userVote:0,
  trending:"stable"
}
];

// Shared Data
let userLikes = {};
let userId = '';

// App State
let lang = 'de';
let cat = 'all';
let price = 'all';
let sort = 'votes';
let query = '';
let activeUseCase = '';
let searchTimeout;
let lastVotedToolId = null;
let oldPositions = {};
let isVoting = false; // Sperre f√ºr gleichzeitige Votes

// Cookie Preferences (globally accessible)
window.cookiePreferences = {
  necessary: true,
  analytics: false,
  functional: false,
  marketing: false
};

// Translations
const translations = {
  de: {
    badge: n => `üöÄ ${n} Rechnungs-Tools f√ºr 2026`,
    title: "Finde sofort dein perfektes Rechnungs-Tool",
    desc: "Echte Freelancer-Bewertungen, Top 5 Charts, intelligente Empfehlungen. Kein unn√∂tiges Scrollen.",
    searchPlaceholder: "Was m√∂chtest du mit deiner Rechnungssoftware erreichen?",
    searchTipsLabel: "Suche nach:",
    searchTips: ["kostenlos", "KI", "mobile", "Zeiterfassung", "international", "Automatisierung", "Vertr√§ge", "einfach"],
    navAuto: "Automatisierung",
    navAutoDesc: "Automatische Erinnerungen, wiederkehrende Rechnungen",
    navTime: "Zeiterfassung",
    navTimeDesc: "Zeit tracken & direkt in Rechnungen umwandeln",
    navIntl: "International",
    navIntlDesc: "Mehrere W√§hrungen, internationale Steuern",
    navMobile: "Mobile First",
    navMobileDesc: "Rechnungen unterwegs erstellen",
    navContract: "Vertr√§ge",
    navContractDesc: "Vertr√§ge & Rechnungen kombinieren",
    navFree: "Kostenlos",
    navFreeDesc: "Top kostenlose Rechnungs-Tools",
    topChartsTitle: "Top 5 Rechnungs-Tools - Community Ranking",
    catAll: "Alle",
    catBasic: "Basic",
    catAdvanced: "Advanced",
    catMobile: "Mobile",
    catAllInOne: "All-in-One",
    catEnterprise: "Enterprise",
    priceAll: "üí∞ Alle Preise",
    priceFree: "üÜì Kostenlos",
    pricePaid: "üí≥ Bezahlt",
    priceFreemium: "‚≠ê Freemium",
    priceOneTime: "üíé Einmalzahlung",
    sortPopular: "üî• Beliebt",
    sortVotes: "üëç Community",
    sortRating: "‚≠ê Bewertung",
    sortPriceLow: "üí∞ Preis ‚Üë",
    sortPriceHigh: "üí∞ Preis ‚Üì",
    toolsFound: "Tools",
    tryNow: "Testen",
    noTitle: "Keine Tools gefunden",
    noMsg: "√Ñndere deine Filter oder versuche andere Suchbegriffe.",
    resetBtn: "Filter zur√ºcksetzen",
    footerCopy: "¬© 2026 Invoice Finder | Community-gest√ºtzte Rechnungs-Tool Empfehlungen",
    footerDiscl: "Bewertungen basieren auf User-Feedback (Supabase). Alle Daten werden mit allen Nutzern geteilt.",
    helpful: "Hilfreich",
    pros: "Vorteile: ",
    cons: "Nachteile: ",
    refreshText: "Aktualisieren",
    // Cookie translations
    cookieTitle: "üç™ Cookie-Einstellungen",
    cookieText: "Wir verwenden Cookies und √§hnliche Technologien, um Ihnen die bestm√∂gliche Erfahrung auf unserer Website zu bieten. Einige Cookies sind technisch notwendig, w√§hrend andere uns helfen, die Nutzung der Website zu analysieren und zu verbessern. Sie k√∂nnen Ihre Einwilligung jederzeit widerrufen.",
    cookieNecessaryTitle: "Notwendige Cookies",
    cookieNecessaryDesc: "Diese Cookies sind f√ºr die grundlegende Funktionalit√§t der Website erforderlich und k√∂nnen nicht deaktiviert werden.",
    cookieAnalyticsTitle: "Analytics Cookies",
    cookieAnalyticsDesc: "Diese Cookies helfen uns zu verstehen, wie Besucher mit unserer Website interagieren, indem sie Informationen anonym sammeln und melden.",
    cookieFunctionalTitle: "Funktionale Cookies",
    cookieFunctionalDesc: "Diese Cookies erm√∂glichen erweiterte Funktionen wie das Speichern Ihrer Spracheinstellungen und Pr√§ferenzen.",
    cookieMarketingTitle: "Marketing Cookies",
    cookieMarketingDesc: "Diese Cookies werden verwendet, um Besuchern auf anderen Websites relevante Werbung anzuzeigen.",
    // Popup translations
    popupFeatures: "Features",
    popupPros: "Vorteile",
    popupCons: "Nachteile",
    popupUseCases: "Geeignet f√ºr",
    popupRating: "Bewertung",
    popupVotes: "Community Votes",
    popupVisit: "Website besuchen",
    // Legal
    imprint: "Impressum",
    privacy: "Datenschutz",
    cookieSettings: "Cookie-Einstellungen"
  },
  en: {
    badge: n => `üöÄ ${n} Invoicing Tools for 2026`,
    title: "Find your perfect invoicing tool instantly",
    desc: "Real freelancer ratings, Top 5 charts, smart recommendations. No unnecessary scrolling.",
    searchPlaceholder: "What do you want to achieve with your invoicing software?",
    searchTipsLabel: "Try:",
    searchTips: ["free", "AI", "mobile", "time tracking", "international", "automation", "contracts", "simple"],
    navAuto: "Automation",
    navAutoDesc: "Auto-reminders, recurring invoices",
    navTime: "Time Tracking",
    navTimeDesc: "Track time & convert to invoices",
    navIntl: "International",
    navIntlDesc: "Multiple currencies, international taxes",
    navMobile: "Mobile First",
    navMobileDesc: "Create invoices on the go",
    navContract: "Contracts",
    navContractDesc: "Combine contracts & invoices",
    navFree: "Free",
    navFreeDesc: "Top free invoicing tools",
    topChartsTitle: "Top 5 Invoicing Tools - Community Ranking",
    catAll: "All",
    catBasic: "Basic",
    catAdvanced: "Advanced",
    catMobile: "Mobile",
    catAllInOne: "All-in-One",
    catEnterprise: "Enterprise",
    priceAll: "üí∞ All prices",
    priceFree: "üÜì Free",
    pricePaid: "üí≥ Paid",
    priceFreemium: "‚≠ê Freemium",
    priceOneTime: "üíé One-time",
    sortPopular: "üî• Popular",
    sortVotes: "üëç Community",
    sortRating: "‚≠ê Rating",
    sortPriceLow: "üí∞ Price ‚Üë",
    sortPriceHigh: "üí∞ Price ‚Üì",
    toolsFound: "Tools",
    tryNow: "Try Now",
    noTitle: "No tools found",
    noMsg: "Change your filters or try different search terms.",
    resetBtn: "Reset filters",
    footerCopy: "¬© 2026 Invoice Finder | Community-driven invoicing tool recommendations",
    footerDiscl: "Ratings based on user feedback (Supabase). All data is shared across all users.",
    helpful: "Helpful",
    pros: "Pros: ",
    cons: "Cons: ",
    refreshText: "Refresh",
    // Cookie translations
    cookieTitle: "üç™ Cookie Settings",
    cookieText: "We use cookies and similar technologies to provide you with the best possible experience on our website. Some cookies are technically necessary, while others help us analyze and improve the use of the website. You can revoke your consent at any time.",
    cookieNecessaryTitle: "Necessary Cookies",
    cookieNecessaryDesc: "These cookies are required for the basic functionality of the website and cannot be disabled.",
    cookieAnalyticsTitle: "Analytics Cookies",
    cookieAnalyticsDesc: "These cookies help us understand how visitors interact with our website by collecting and reporting information anonymously.",
    cookieFunctionalTitle: "Functional Cookies",
    cookieFunctionalDesc: "These cookies enable advanced features such as saving your language settings and preferences.",
    cookieMarketingTitle: "Marketing Cookies",
    cookieMarketingDesc: "These cookies are used to show visitors relevant advertising on other websites.",
    // Popup translations
    popupFeatures: "Features",
    popupPros: "Pros",
    popupCons: "Cons",
    popupUseCases: "Ideal For",
    popupRating: "Rating",
    popupVotes: "Community Votes",
    popupVisit: "Visit Website",
    // Legal
    imprint: "Imprint",
    privacy: "Privacy Policy",
    cookieSettings: "Cookie Settings"
  }
};

// Legal Content
const legalContent = {
  de: {
    privacy: `
      <h2>Datenschutzerkl√§rung</h2>
      
      <h3>1. Verantwortlicher</h3>
      <p>Qerim Banulla<br>
      c/o Online-Impressum.de #6292<br>
      Europaring 90<br>
      53757 Sankt Augustin<br>
      Deutschland<br>
      E-Mail: ai.tool.hub.contact@gmail.com<br>
      Telefon: +49 173 5489128 (Kein Telefonsupport, nur E-Mail)</p>

      <h3>2. Hosting durch GitHub Pages</h3>
      <p>Wir hosten unsere Website bei <strong>GitHub Pages</strong>. Anbieter ist die GitHub Inc., 88 Colin P Kelly Jr St, San Francisco, CA 94107, USA (nachfolgend ‚ÄûGitHub‚Äú).</p>
      <p>Wenn Sie unsere Website besuchen, erfasst GitHub Ihre IP-Adresse sowie technische Informationen (Logfiles), um die Sicherheit und Auslieferung der Website zu gew√§hrleisten. Die Nutzung von GitHub Pages erfolgt auf Grundlage von Art. 6 Abs. 1 lit. f DSGVO. Wir haben ein berechtigtes Interesse an einer m√∂glichst zuverl√§ssigen Darstellung unserer Website.</p>
      <p>Die Daten√ºbertragung in die USA wird auf die Standardvertragsklauseln der EU-Kommission gest√ºtzt. Weitere Details entnehmen Sie der Datenschutzerkl√§rung von GitHub: <a href="https://docs.github.com/de/site-policy/privacy-policies/github-privacy-statement" target="_blank" rel="noopener">https://docs.github.com/de/site-policy/privacy-policies/github-privacy-statement</a>.</p>

      <h3>3. Erhebung und Verarbeitung personenbezogener Daten</h3>
      <p>Bei der Nutzung unserer Website erheben wir nur personenbezogene Daten, die technisch notwendig sind, um die Funktionalit√§t der Website zu gew√§hrleisten. Hierzu geh√∂ren:</p>
      <ul>
        <li>IP-Adresse (anonymisiert)</li>
        <li>Datum und Uhrzeit des Zugriffs</li>
        <li>Verwendeter Browser und Betriebssystem</li>
        <li>Ihre Cookie-Pr√§ferenzen</li>
      </ul>
      
      <h3>4. Cookies und Tracking-Technologien</h3>
      <p>Wir verwenden folgende Arten von Cookies:</p>
      <ul>
        <li><strong>Notwendige Cookies:</strong> F√ºr die grundlegende Funktionalit√§t der Website erforderlich</li>
        <li><strong>Analytics Cookies:</strong> Zur Analyse der Nutzung unserer Website (Google Analytics 4, ID: G-53RF07VYJ8)</li>
        <li><strong>Funktionale Cookies:</strong> Zum Speichern Ihrer Einstellungen und Pr√§ferenzen</li>
      </ul>
      
      <h3>5. Google Analytics 4</h3>
      <p>Diese Website verwendet Google Analytics 4, einen Webanalysedienst der Google LLC. Die durch das Cookie erzeugten Informationen √ºber Ihre Benutzung dieser Website werden in der Regel an einen Server von Google in den USA √ºbertragen und dort gespeichert. Wir verwenden die Funktion "IP-Anonymisierung". Ihre IP-Adresse wird von Google innerhalb von Mitgliedstaaten der Europ√§ischen Union oder in anderen Vertragsstaaten des Abkommens √ºber den Europ√§ischen Wirtschaftsraum zuvor gek√ºrzt. Die Speicherdauer betr√§gt 14 Monate.</p>
      
      <h3>6. Supabase</h3>
      <p>F√ºr die Speicherung von Tool-Bewertungen verwenden wir Supabase, einen cloudbasierten Backend-Service. Die gespeicherten Daten (Tool-ID, Bewertungswert) enthalten keine personenbezogenen Informationen und sind anonymisiert.</p>
      
      <h3>7. Jugendschutz</h3>
      <p>Diese Website richtet sich an Nutzer ab 16 Jahren. Personen unter 16 Jahren d√ºrfen keine personenbezogenen Daten ohne Einwilligung der Erziehungsberechtigten an uns √ºbermitteln.</p>
      
      <h3>8. Ihre Rechte</h3>
      <p>Sie haben das Recht auf:</p>
      <ul>
        <li>Auskunft √ºber Ihre gespeicherten Daten</li>
        <li>Berichtigung unrichtiger Daten</li>
        <li>L√∂schung Ihrer Daten</li>
        <li>Einschr√§nkung der Verarbeitung</li>
        <li>Widerspruch gegen die Verarbeitung</li>
        <li>Daten√ºbertragbarkeit</li>
      </ul>
      
      <h3>9. Kontakt</h3>
      <p>F√ºr Fragen zum Datenschutz kontaktieren Sie uns bitte unter: ai.tool.hub.contact@gmail.com</p>
    
      <p><em>Stand: Februar 2026</em></p>
    `,
    imprint: `
      <h2>Impressum</h2>
      
      <h3>Angaben gem√§√ü ¬ß 5 DDG</h3>
      <p>Qerim Banulla<br>
      c/o Online-Impressum.de #6292<br>
      Europaring 90<br>
      53757 Sankt Augustin<br>
      Deutschland</p>
      
      <h3>Kontakt</h3>
      <p>Telefon: +49 173 5489128 (Support bevorzugt via E-Mail)<br>
      E-Mail: ai.tool.hub.contact@gmail.com</p>

      <h3>Aufsichtsbeh√∂rde</h3>
      <p>Landesanstalt f√ºr Medien Nordrhein-Westfalen</p>
      
      <h3>Verantwortlich f√ºr den Inhalt nach ¬ß 18 Abs. 2 MStV</h3>
      <p>Qerim Banulla<br>
      c/o Online-Impressum.de #6292<br>
      Europaring 90<br>
      53757 Sankt Augustin</p>
      
      <h3>Haftungsausschluss & Affiliate-Hinweis</h3>
      <p>Die Inhalte dieser Seite wurden mit gr√∂√üter Sorgfalt erstellt. F√ºr die Richtigkeit, Vollst√§ndigkeit und Aktualit√§t der Inhalte kann jedoch keine Gew√§hr √ºbernommen werden. 
      Diese Website enth√§lt zudem Affiliate-Links. Wenn Sie √ºber diese Links ein Produkt kaufen, erhalte ich eine kleine Provision, ohne dass f√ºr Sie Mehrkosten entstehen.</p>
      
      <h4>Haftung f√ºr Inhalte</h4>
      <p>Als Diensteanbieter sind wir gem√§√ü ¬ß 7 Abs.1 TMG f√ºr eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach ¬ß¬ß 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, √ºbermittelte oder gespeicherte fremde Informationen zu √ºberwachen oder nach Umst√§nden zu forschen, die auf eine rechtswidrige T√§tigkeit hinweisen.</p>
      
      <h4>Haftung f√ºr Links</h4>
      <p>Unser Angebot enth√§lt Links zu externen Websites Dritter, auf deren Inhalte wir keinen Einfluss haben. F√ºr die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich.</p>
      
      <h4>Urheberrecht</h4>
      <p>Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten unterliegen dem deutschen Urheberrecht. Die Vervielf√§ltigung, Bearbeitung, Verbreitung und jede Art der Verwertung au√üerhalb der Grenzen des Urheberrechtes bed√ºrfen der schriftlichen Zustimmung des jeweiligen Autors bzw. Erstellers.</p>
      
      <p><em>Stand: Februar 2026</em></p>
    `
  },
  en: {
    privacy: `
      <h2>Privacy Policy</h2>
      
      <h3>1. Controller</h3>
      <p>Qerim Banulla<br>
      c/o Online-Impressum.de #6292<br>
      Europaring 90<br>
      53757 Sankt Augustin<br>
      Germany<br>
      Email: ai.tool.hub.contact@gmail.com<br>
      Phone: +49 173 5489128 (No phone support, email only)</p>
      
      <h3>2. Hosting by GitHub Pages</h3>
      <p>We host our website on <strong>GitHub Pages</strong>. The provider is GitHub Inc., 88 Colin P Kelly Jr St, San Francisco, CA 94107, USA (hereinafter "GitHub").</p>
      <p>When you visit our website, GitHub collects your IP address and technical information (log files) to ensure the security and delivery of the website. The use of GitHub Pages is based on Art. 6 para. 1 lit. f GDPR. We have a legitimate interest in the most reliable presentation of our website.</p>
      <p>The data transfer to the USA is based on the standard contractual clauses of the EU Commission. For more details, please refer to GitHub's privacy policy: <a href="https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement" target="_blank" rel="noopener">https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement</a>.</p>
      
      <h3>3. Collection and Processing of Personal Data</h3>
      <p>When using our website, we only collect personal data that is technically necessary to ensure the functionality of the website. This includes:</p>
      <ul>
        <li>IP address (anonymized)</li>
        <li>Date and time of access</li>
        <li>Browser and operating system used</li>
        <li>Your cookie preferences</li>
      </ul>
      
      <h3>4. Cookies and Tracking Technologies</h3>
      <p>We use the following types of cookies:</p>
      <ul>
        <li><strong>Necessary cookies:</strong> Required for basic website functionality</li>
        <li><strong>Analytics cookies:</strong> For analyzing the use of our website (Google Analytics 4, ID: G-53RF07VYJ8)</li>
        <li><strong>Functional cookies:</strong> For saving your settings and preferences</li>
      </ul>
      
      <h3>5. Google Analytics 4</h3>
      <p>This website uses Google Analytics 4, a web analytics service provided by Google LLC. The information generated by the cookie about your use of this website is usually transmitted to and stored by Google on servers in the United States. We use the "IP anonymization" function. Your IP address will be truncated by Google within member states of the European Union or other parties to the Agreement on the European Economic Area. The storage period is 14 months.</p>
      
      <h3>6. Supabase</h3>
      <p>For storing tool ratings, we use Supabase, a cloud-based backend service. The stored data (tool ID, rating value) does not contain any personal information and is anonymized.</p>
      
      <h3>7. Youth Protection</h3>
      <p>This website is intended for users aged 16 and over. Persons under the age of 16 may not transmit personal data to us without the consent of their parents or guardians.</p>
      
      <h3>8. Your Rights</h3>
      <p>You have the right to:</p>
      <ul>
        <li>Information about your stored data</li>
        <li>Correction of incorrect data</li>
        <li>Deletion of your data</li>
        <li>Restriction of processing</li>
        <li>Objection to processing</li>
        <li>Data portability</li>
      </ul>
      
      <h3>9. Contact</h3>
      <p>For questions regarding data protection, please contact us at: ai.tool.hub.contact@gmail.com</p>
      
      <p><em>As of: February 2026</em></p>
    `,
    imprint: `
      <h2>Imprint</h2>
      
      <h3>Information according to ¬ß 5 DDG</h3>
      <p>Qerim Banulla<br>
      c/o Online-Impressum.de #6292<br>
      Europaring 90<br>
      53757 Sankt Augustin<br>
      Germany</p>
      
      <h3>Contact</h3>
      <p>Phone: +49 173 5489128 (support preferred via email)<br>
      Email: ai.tool.hub.contact@gmail.com</p>
      
      <h3>Supervisory authority</h3>
      <p>Landesanstalt f√ºr Medien Nordrhein-Westfalen</p>
      
      <h3>Responsible for content according to ¬ß 18 Abs. 2 MStV</h3>
      <p>Qerim Banulla<br>
      c/o Online-Impressum.de #6292<br>
      Europaring 90<br>
      53757 Sankt Augustin<br>
      Germany</p>
      
      <h3>Disclaimer & Affiliate Notice</h3>
      <p>The contents of this page have been created with the greatest care. However, no guarantee can be given for the correctness, completeness and topicality of the contents. 
      This website also contains affiliate links. If you purchase a product through these links, I will receive a small commission without any additional cost to you.</p>
      
      <h4>Liability for Content</h4>
      <p>As a service provider, we are responsible for our own content on these pages according to ¬ß 7 para.1 TMG. According to ¬ß¬ß 8 to 10 TMG, however, we as a service provider are not obliged to monitor transmitted or stored third-party information or to investigate circumstances that indicate illegal activity.</p>
      
      <h4>Liability for Links</h4>
      <p>Our offer contains links to external third-party websites over whose content we have no influence. The content of the linked pages is always the responsibility of the respective provider or operator of the pages.</p>
      
      <h4>Copyright</h4>
      <p>The content and works created by the site operators on these pages are subject to German copyright law. Reproduction, processing, distribution and any kind of exploitation outside the limits of copyright require the written consent of the respective author or creator.</p>
      
      <p><em>As of: February 2026</em></p>
    `
  }
};

// Cookie Management Functions
function loadCookiePreferences() {
  const savedPrefs = localStorage.getItem('cookiePreferences');
  if (savedPrefs) {
    try {
      window.cookiePreferences = JSON.parse(savedPrefs);
    } catch (e) {
      console.error('Error parsing cookie preferences:', e);
    }
  }
  
  // Update UI based on preferences
  updateCookieUI();
  
  // Load Google Analytics if analytics cookies are accepted
  if (window.cookiePreferences.analytics) {
    loadGoogleAnalytics();
  }
}

function saveCookiePreferences() {
  localStorage.setItem('cookiePreferences', JSON.stringify(window.cookiePreferences));
  updateCookieUI();
  
  // Apply analytics based on preferences
  if (window.cookiePreferences.analytics) {
    loadGoogleAnalytics();
  }
  
  showNotification('Cookie-Einstellungen wurden gespeichert.', 'success');
}

function showCookieBanner() {
  const banner = document.getElementById('cookieBanner');
  const cookieSet = localStorage.getItem('cookiePreferences');
  
  if (!cookieSet) {
    setTimeout(() => {
      banner.classList.add('active');
    }, 1000);
  }
}

function hideCookieBanner() {
  const banner = document.getElementById('cookieBanner');
  banner.classList.remove('active');
}

function updateCookieUI() {
  // Update switches in cookie modal
  document.getElementById('analyticsCookies').checked = window.cookiePreferences.analytics;
  document.getElementById('functionalCookies').checked = window.cookiePreferences.functional;
  document.getElementById('marketingCookies').checked = window.cookiePreferences.marketing;
}

// Tool Detail Popup Functions
function openToolPopup(toolId) {
  const tool = invoiceTools.find(t => t.id === toolId);
  if (!tool) return;
  
  const t = translations[lang];
  
  // Set title
  document.getElementById('popupTitle').textContent = tool.name;
  
  // Build popup content
  let content = `
    <div class="tool-popup-meta">
      <span class="tool-popup-category">${catName(tool.category)}</span>
      <span class="tool-popup-price">${tool.priceDisplay[lang]}</span>
      <span class="tool-popup-rating">
        <i class="fas fa-star"></i>
        ${tool.rating}/5
      </span>
      ${tool.trending ? `<span class="trending-indicator trending-${tool.trending}">
        <i class="fas fa-${tool.trending === 'up' ? 'arrow-up' : tool.trending === 'down' ? 'arrow-down' : 'minus'}"></i>
        ${tool.trending === 'up' ? 'Trending' : tool.trending === 'down' ? 'Falling' : 'Stable'}
      </span>` : ''}
    </div>
    
    <div class="tool-popup-section">
      <h3><i class="fas fa-info-circle"></i> ${lang === 'de' ? 'Beschreibung' : 'Description'}</h3>
      <p class="tool-popup-description">${tool.detailedDescription ? tool.detailedDescription[lang] : tool.description[lang]}</p>
    </div>
    
    <div class="tool-popup-section">
      <h3><i class="fas fa-list-check"></i> ${t.popupFeatures}</h3>
      <div class="tool-popup-features">
        ${tool.features.map(feature => `<span class="tool-popup-feature">${feature}</span>`).join('')}
      </div>
    </div>
    
    <div class="tool-popup-lists">
      <div class="tool-popup-pros">
        <h4><i class="fas fa-thumbs-up"></i> ${t.popupPros}</h4>
        <ul>
          ${tool.pros[lang].map(pro => `<li>${pro}</li>`).join('')}
        </ul>
      </div>
      
      <div class="tool-popup-cons">
        <h4><i class="fas fa-thumbs-down"></i> ${t.popupCons}</h4>
        <ul>
          ${tool.cons[lang].map(con => `<li>${con}</li>`).join('')}
        </ul>
      </div>
    </div>
  `;
  
  // Add use cases if available
  if (tool.useCases && tool.useCases.length > 0) {
    const useCaseNames = {
      'automation': lang === 'de' ? 'Automatisierung' : 'Automation',
      'time-tracking': lang === 'de' ? 'Zeiterfassung' : 'Time Tracking',
      'international': lang === 'de' ? 'International' : 'International',
      'mobile': lang === 'de' ? 'Mobile' : 'Mobile',
      'contracts': lang === 'de' ? 'Vertr√§ge' : 'Contracts',
      'basic': lang === 'de' ? 'Basic' : 'Basic',
      'free': lang === 'de' ? 'Kostenlos' : 'Free',
      'advanced': lang === 'de' ? 'Advanced' : 'Advanced'
    };
    
    content += `
      <div class="tool-popup-section">
        <h3><i class="fas fa-bullseye"></i> ${t.popupUseCases}</h3>
        <div class="tool-popup-use-cases">
          ${tool.useCases.map(useCase => `<span class="tool-popup-use-case">${useCaseNames[useCase] || useCase}</span>`).join('')}
        </div>
      </div>
    `;
  }
  
  // Add actions section
  content += `
    <div class="tool-popup-actions">
      <a href="${tool.link}" class="tool-popup-link" target="_blank" rel="noopener noreferrer">
        <i class="fas fa-external-link-alt"></i> ${t.popupVisit}
      </a>
      <div class="tool-popup-votes">
        <i class="fas fa-thumbs-up" style="color: var(--secondary);"></i>
        <span>${tool.votes}</span>
        <span>${t.popupVotes}</span>
      </div>
    </div>
  `;
  
  // Set content
  document.getElementById('popupBody').innerHTML = content;
  
  // Show popup
  const popup = document.getElementById('toolPopup');
  popup.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeToolPopup() {
  const popup = document.getElementById('toolPopup');
  popup.classList.remove('active');
  document.body.style.overflow = 'auto';
}

// Supabase Helper Functions
async function supabaseFetch(endpoint, options = {}) {
  const headers = {
    'apikey': SUPABASE_ANON_KEY,
    'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
    'Content-Type': 'application/json',
    ...options.headers
  };
    
  try {
    const response = await fetch(`${SUPABASE_URL}/rest/v1/${endpoint}`, {
      ...options,
      headers
    });
      
    if (!response.ok) {
      throw new Error(`Supabase error: ${response.status}`);
    }
      
    if (response.status === 204) {
      return null;
    }
      
    return await response.json();
  } catch (error) {
    console.error('Supabase fetch error:', error);
    throw error;
  }
}

async function initializeUser() {
  // Generate or load user ID
  userId = localStorage.getItem('supabase_user_id');
  if (!userId) {
    userId = 'user_' + Math.random().toString(36).substr(2, 9);
    localStorage.setItem('supabase_user_id', userId);
  }
}

async function loadAllData() {
  try {
    showNotification('Lade Daten von Supabase...', 'info');
      
    // Load tool votes
    const votesData = await supabaseFetch('tool_votes?select=*');
    if (votesData) {
      votesData.forEach(vote => {
        const tool = invoiceTools.find(t => t.id === vote.tool_id);
        if (tool) {
          tool.votes = vote.total_votes || 0;
        }
      });
    }
      
    // Load local user votes for UI state
    const savedVotes = localStorage.getItem('invoiceToolsVotes');
    if (savedVotes) {
      const userVotes = JSON.parse(savedVotes);
      invoiceTools.forEach(tool => {
        if (userVotes[tool.id]) {
          tool.userVote = userVotes[tool.id].userVote || 0;
        }
      });
    }
      
    // Update status indicator
    updateStatusIndicator(true);
    showNotification('Daten erfolgreich geladen!', 'success');
  } catch (error) {
    console.error('Error loading data:', error);
    updateStatusIndicator(false);
    showNotification('Fehler beim Laden der Daten. Verwende lokale Daten.', 'error');
  }
}

// Notification System
function showNotification(message, type = 'info') {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.innerHTML = `
    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
    <span>${message}</span>
    <button class="notification-close"><i class="fas fa-times"></i></button>
  `;
    
  document.body.appendChild(notification);
    
  // Add close event
  notification.querySelector('.notification-close').addEventListener('click', () => {
    notification.style.animation = 'slideOut 0.2s ease';
    setTimeout(() => notification.remove(), 200);
  });
    
  // Auto remove after 5 seconds
  setTimeout(() => {
    if (notification.parentNode) {
      notification.style.animation = 'slideOut 0.2s ease';
      setTimeout(() => notification.remove(), 200);
    }
  }, 5000);
}

function updateStatusIndicator(online) {
  const indicator = document.getElementById('supabaseStatusFooter');
  if (indicator) {
    indicator.className = `supabase-status ${online ? 'online' : 'offline'}`;
    indicator.innerHTML = `
      <i class="fas fa-database"></i>
      <span>Supabase: ${online ? 'verbunden' : 'offline'}</span>
    `;
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', async () => {
  // Load cookie preferences first
  loadCookiePreferences();
  
  await initializeUser();
  await loadAllData();
  setupEvents();
  updateLang();
  renderTopCharts();
  applyFilters();
  renderSearchTips();
  setupSearchTipsScroll();
  
  // Show cookie banner if no preferences set
  showCookieBanner();
    
  // Auto-refresh every 30 seconds
  setInterval(async () => {
    await loadAllData();
    renderTopCharts();
    applyFilters();
  }, 30000);
});

// Event Setup
function setupEvents() {
  // Language switch
  document.getElementById('langBtn').addEventListener('click', () => {
    lang = lang === 'de' ? 'en' : 'de';
    document.getElementById('langText').textContent = lang === 'de' ? 'EN' : 'DE';
    updateLang();
    renderTopCharts();
    applyFilters();
    renderSearchTips();
  });

  // Search functionality
  const searchInput = document.getElementById('searchInput');
  searchInput.addEventListener('input', e => {
    clearTimeout(searchTimeout);
    const v = e.target.value.toLowerCase();
    searchTimeout = setTimeout(() => {
      query = v;
      if (v.length > 1) showSuggestions(v);
      else hideSuggestions();
      applyFilters();
    }, 300);
  });
  searchInput.addEventListener('focus', () => {
    if (searchInput.value.length > 0) showSuggestions(searchInput.value);
  });
  searchInput.addEventListener('blur', () => {
    setTimeout(hideSuggestions, 200);
  });

  // Keyboard shortcuts
  document.addEventListener('keydown', e => {
    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
      e.preventDefault();
      searchInput.focus();
    }
    if (e.key === 'Escape') {
      if (document.getElementById('toolPopup').classList.contains('active')) {
        closeToolPopup();
      } else {
        searchInput.value = '';
        query = '';
        hideSuggestions();
        applyFilters();
      }
    }
  });

  // Quick navigation
  document.getElementById('quickNav').addEventListener('click', e => {
    const card = e.target.closest('.quick-card');
    if (!card) return;
      
    document.querySelectorAll('.quick-card').forEach(c => c.classList.remove('active'));
    card.classList.add('active');
      
    const category = card.dataset.category;
    const useCase = card.dataset.usecase;
      
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    document.querySelector('[data-scope="all"]').classList.add('active');
      
    if (category) {
      cat = 'all';
      price = category;
      activeUseCase = '';
      document.getElementById('priceFilter').value = price;
    } else if (useCase) {
      cat = 'all';
      price = 'all';
      activeUseCase = useCase;
      document.getElementById('priceFilter').value = price;
    }
      
    query = '';
    searchInput.value = '';
      
    applyFilters();
    window.scrollTo({ top: document.querySelector('.tools-container').offsetTop - 20, behavior: 'smooth' });
  });

  // Tool filters
  document.querySelector('.compact-filters').addEventListener('click', e => {
    const btn = e.target.closest('.filter-btn');
    if (!btn) return;
      
    document.querySelectorAll('.quick-card').forEach(c => c.classList.remove('active'));
    document.querySelectorAll('.compact-filters .filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
      
    if (btn.dataset.scope === 'all') {
      cat = 'all';
    } else if (btn.dataset.category) {
      cat = btn.dataset.category;
    }
      
    price = 'all';
    activeUseCase = '';
    document.getElementById('priceFilter').value = price;
      
    applyFilters();
  });

  // Price and sort filters
  document.getElementById('priceFilter').addEventListener('change', function() {
    price = this.value;
    document.querySelectorAll('.quick-card').forEach(c => c.classList.remove('active'));
    activeUseCase = '';
    applyFilters();
  });
    
  document.getElementById('sortFilter').addEventListener('change', function() {
    sort = this.value;
    applyFilters();
  });

  // Scroll to top button
  const scrollBtn = document.getElementById('scrollTop');
  window.addEventListener('scroll', () => {
    scrollBtn.classList.toggle('visible', window.pageYOffset > 300);
  });
  scrollBtn.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // Refresh data button
  document.getElementById('refreshDataBtn').addEventListener('click', async () => {
    const btn = document.getElementById('refreshDataBtn');
    btn.classList.add('data-refresh');
      
    await loadAllData();
    renderTopCharts();
    applyFilters();
      
    setTimeout(() => {
      btn.classList.remove('data-refresh');
    }, 1000);
  });
  
  // Tool popup close button
  document.getElementById('popupClose').addEventListener('click', closeToolPopup);
  
  // Close popup when clicking outside
  document.getElementById('toolPopup').addEventListener('click', (e) => {
    if (e.target === document.getElementById('toolPopup')) {
      closeToolPopup();
    }
  });
  
  // Cookie Banner Events
  document.getElementById('cookieAcceptAllBtn').addEventListener('click', () => {
    window.cookiePreferences = {
      necessary: true,
      analytics: true,
      functional: true,
      marketing: true
    };
    saveCookiePreferences();
    hideCookieBanner();
  });
  
  document.getElementById('cookieNecessaryBtn').addEventListener('click', () => {
    window.cookiePreferences = {
      necessary: true,
      analytics: false,
      functional: false,
      marketing: false
    };
    saveCookiePreferences();
    hideCookieBanner();
  });
  
  document.getElementById('cookieSettingsBtn').addEventListener('click', () => {
    openCookieModal();
  });
  
  // Cookie Floating Button Event
  document.getElementById('cookieFloatingBtn').addEventListener('click', () => {
    openCookieModal();
  });
  
  // Cookie Modal Events
  document.getElementById('cookieModalClose').addEventListener('click', closeCookieModal);
  document.getElementById('cookieModalCancel').addEventListener('click', closeCookieModal);
  document.getElementById('cookieModalSave').addEventListener('click', () => {
    window.cookiePreferences.analytics = document.getElementById('analyticsCookies').checked;
    window.cookiePreferences.functional = document.getElementById('functionalCookies').checked;
    window.cookiePreferences.marketing = document.getElementById('marketingCookies').checked;
    saveCookiePreferences();
    closeCookieModal();
    hideCookieBanner();
  });
  
  // Legal Modal Events
  document.getElementById('privacyModalClose').addEventListener('click', () => {
    document.getElementById('privacyModal').classList.remove('active');
    document.body.style.overflow = 'auto';
  });
  
  document.getElementById('imprintModalClose').addEventListener('click', () => {
    document.getElementById('imprintModal').classList.remove('active');
    document.body.style.overflow = 'auto';
  });
  
  // Legal Links
  document.getElementById('privacyLink').addEventListener('click', (e) => {
    e.preventDefault();
    openPrivacyModal();
  });
  
  document.getElementById('privacyFooterLink').addEventListener('click', (e) => {
    e.preventDefault();
    openPrivacyModal();
  });
  
  document.getElementById('imprintLink').addEventListener('click', (e) => {
    e.preventDefault();
    openImprintModal();
  });
  
  document.getElementById('cookieSettingsLink').addEventListener('click', (e) => {
    e.preventDefault();
    openCookieModal();
  });
}

// Cookie Modal Functions
function openCookieModal() {
  const modal = document.getElementById('cookieModal');
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeCookieModal() {
  const modal = document.getElementById('cookieModal');
  modal.classList.remove('active');
  document.body.style.overflow = 'auto';
}

// Legal Modal Functions
function openPrivacyModal() {
  const modal = document.getElementById('privacyModal');
  const body = document.getElementById('privacyModalBody');
  body.innerHTML = legalContent[lang].privacy;
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function openImprintModal() {
  const modal = document.getElementById('imprintModal');
  const body = document.getElementById('imprintModalBody');
  body.innerHTML = legalContent[lang].imprint;
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

// OPTIMIERTES Voting System mit besserer Performance
async function handleVote(toolId, vote) {
  // Verhindere gleichzeitige Votes
  if (isVoting) return;
  isVoting = true;
  
  const tool = invoiceTools.find(t => t.id === toolId);
  if (!tool) {
    isVoting = false;
    return;
  }

  const oldUserVote = tool.userVote;
  const oldVotes = tool.votes;
  
  // Sofortige UI-Aktualisierung (optimistic update)
  let voteChange = 0;
  
  if (oldUserVote === vote) {
    // Vote entfernen
    tool.userVote = 0;
    voteChange = (vote === 1 ? -1 : 1); // Upvote entfernen: -1, Downvote entfernen: +1
  } else if (oldUserVote === 0) {
    // Neuer Vote
    tool.userVote = vote;
    voteChange = (vote === 1 ? 1 : -1); // Neuer Upvote: +1, Neuer Downvote: -1
  } else {
    // Vote √§ndern
    tool.userVote = vote;
    voteChange = (vote === 1 ? 2 : -2); // Von Down zu Up: +2, von Up zu Down: -2
  }
  
  // Sofortige Aktualisierung der Vote-Zahl
  tool.votes = oldVotes + voteChange;
  
  // Save local user vote
  const savedVotes = JSON.parse(localStorage.getItem('invoiceToolsVotes') || '{}');
  savedVotes[toolId] = { userVote: tool.userVote };
  localStorage.setItem('invoiceToolsVotes', JSON.stringify(savedVotes));
  
  // Sofortige UI-Aktualisierung (ohne komplette Re-Render)
  updateVoteUI(toolId, tool.votes, tool.userVote);
  
  // Animation f√ºr Vote-Button
  const button = event.target.closest('.vote-btn, .vote-btn-compact');
  if (button) {
    button.style.transform = 'scale(0.95)';
    setTimeout(() => {
      button.style.transform = '';
    }, 150);
  }
  
  // Animation f√ºr Vote-Zahl
  const voteCountElement = document.querySelector(`[data-id="${toolId}"] .vote-count, .chart-card[data-id="${toolId}"] .vote-count-display`);
  if (voteCountElement) {
    voteCountElement.classList.add('vote-count-animation');
    setTimeout(() => {
      voteCountElement.classList.remove('vote-count-animation');
    }, 300);
  }
  
  // Supabase Update im Hintergrund (nicht blockierend)
  try {
    const existingVote = await supabaseFetch(`tool_votes?tool_id=eq.${toolId}`);
    
    if (existingVote && existingVote[0]) {
      const updatedUpvotes = (existingVote[0].upvotes || 0);
      const updatedDownvotes = (existingVote[0].downvotes || 0);
      
      // Berechne die tats√§chliche √Ñnderung
      let upvoteChange = 0;
      let downvoteChange = 0;
      
      if (oldUserVote === 1 && vote === 1) {
        // Upvote entfernen
        upvoteChange = -1;
      } else if (oldUserVote === -1 && vote === -1) {
        // Downvote entfernen
        downvoteChange = -1;
      } else if (oldUserVote === 1 && vote === -1) {
        // Von Up zu Down
        upvoteChange = -1;
        downvoteChange = 1;
      } else if (oldUserVote === -1 && vote === 1) {
        // Von Down zu Up
        downvoteChange = -1;
        upvoteChange = 1;
      } else if (oldUserVote === 0 && vote === 1) {
        // Neuer Upvote
        upvoteChange = 1;
      } else if (oldUserVote === 0 && vote === -1) {
        // Neuer Downvote
        downvoteChange = 1;
      }
      
      const finalUpvotes = updatedUpvotes + upvoteChange;
      const finalDownvotes = updatedDownvotes + downvoteChange;
      const finalTotal = finalUpvotes - finalDownvotes;
      
      await supabaseFetch(`tool_votes?tool_id=eq.${toolId}`, {
        method: 'PATCH',
        body: JSON.stringify({
          upvotes: finalUpvotes,
          downvotes: finalDownvotes,
          total_votes: finalTotal
        })
      });
      
      // Falls sich die Vote-Zahl auf dem Server unterscheidet, aktualisiere lokal
      if (finalTotal !== tool.votes) {
        tool.votes = finalTotal;
        updateVoteUI(toolId, finalTotal, tool.userVote);
      }
      
      lastVotedToolId = toolId;
      
      // Mini-Notification f√ºr Erfolg
      const notification = document.createElement('div');
      notification.className = 'notification success';
      notification.innerHTML = `<i class="fas fa-check-circle"></i> <span>Vote gespeichert!</span>`;
      document.body.appendChild(notification);
      setTimeout(() => notification.remove(), 2000);
    }
  } catch (error) {
    console.error('Error updating vote:', error);
    
    // Bei Fehler: Zur√ºcksetzen auf alten Zustand
    tool.votes = oldVotes;
    tool.userVote = oldUserVote;
    updateVoteUI(toolId, oldVotes, oldUserVote);
    
    showNotification('Fehler beim Speichern des Votes', 'error');
  } finally {
    isVoting = false;
  }
}

// Hilfsfunktion f√ºr schnelle UI-Aktualisierung
function updateVoteUI(toolId, votes, userVote) {
  // Aktualisiere Top Charts
  const chartCard = document.querySelector(`.chart-card[data-id="${toolId}"]`);
  if (chartCard) {
    const voteCount = chartCard.querySelector('.vote-count-display');
    if (voteCount) voteCount.textContent = votes;
    
    const upButton = chartCard.querySelector('.vote-btn.up');
    const downButton = chartCard.querySelector('.vote-btn.down');
    
    if (upButton) upButton.classList.toggle('active', userVote === 1);
    if (downButton) downButton.classList.toggle('active', userVote === -1);
  }
  
  // Aktualisiere Compact View
  const compactRow = document.querySelector(`.compact-tool-row[data-id="${toolId}"]`);
  if (compactRow) {
    const voteCount = compactRow.querySelector('.vote-count');
    if (voteCount) {
      voteCount.textContent = votes;
      voteCount.classList.toggle('upvoted', userVote === 1);
      voteCount.classList.toggle('downvoted', userVote === -1);
    }
    
    const upButton = compactRow.querySelector('.vote-btn-compact.up');
    const downButton = compactRow.querySelector('.vote-btn-compact.down');
    
    if (upButton) upButton.classList.toggle('active', userVote === 1);
    if (downButton) downButton.classList.toggle('active', userVote === -1);
  }
  
  // Aktualisiere Popup falls ge√∂ffnet
  const popupTitle = document.getElementById('popupTitle');
  if (popupTitle && popupTitle.textContent === invoiceTools.find(t => t.id === toolId)?.name) {
    const popupVotes = document.querySelector('.tool-popup-votes span');
    if (popupVotes && popupVotes.textContent === String(votes)) {
      // Nur aktualisieren wenn unterschiedlich
      const votesSpan = document.querySelector('.tool-popup-votes span:nth-child(2)');
      if (votesSpan) votesSpan.textContent = votes;
    }
  }
}

function setupSearchTipsScroll() {
  const tipsContainer = document.getElementById('searchTips');
  const scrollLeftBtn = document.getElementById('scrollLeftBtn');
  const scrollRightBtn = document.getElementById('scrollRightBtn');
    
  function updateScrollButtons() {
    const container = document.querySelector('.search-tips-wrapper');
    const tips = document.getElementById('searchTips');
      
    const isOverflowing = tips.scrollWidth > container.clientWidth;
      
    if (isOverflowing) {
      scrollLeftBtn.classList.remove('hidden');
      scrollRightBtn.classList.remove('hidden');
    } else {
      scrollLeftBtn.classList.add('hidden');
      scrollRightBtn.classList.add('hidden');
    }
      
    if (tips.scrollLeft <= 0) {
      scrollLeftBtn.classList.add('hidden');
    } else {
      scrollLeftBtn.classList.remove('hidden');
    }
      
    if (tips.scrollLeft + tips.clientWidth >= tips.scrollWidth - 1) {
      scrollRightBtn.classList.add('hidden');
    } else {
      scrollRightBtn.classList.remove('hidden');
    }
  }
    
  scrollLeftBtn.addEventListener('click', () => {
    tipsContainer.scrollBy({ left: -100, behavior: 'smooth' });
  });
    
  scrollRightBtn.addEventListener('click', () => {
    tipsContainer.scrollBy({ left: 100, behavior: 'smooth' });
  });
    
  window.addEventListener('resize', updateScrollButtons);
    
  setTimeout(updateScrollButtons, 100);
  setTimeout(updateScrollButtons, 500);
}

function renderSearchTips() {
  const tipsContainer = document.getElementById('searchTips');
  const t = translations[lang];
    
  const label = tipsContainer.querySelector('.search-tips-label');
  tipsContainer.innerHTML = '';
  if (label) tipsContainer.appendChild(label);
    
  const tips = t.searchTips || [];
    
  tips.forEach(tip => {
    const tipElement = document.createElement('span');
    tipElement.className = 'search-tip-item';
    tipElement.textContent = tip;
    tipElement.addEventListener('click', () => {
      document.querySelectorAll('.search-tip-item').forEach(item => {
        item.classList.remove('active');
      });
        
      tipElement.classList.add('active');
        
      document.getElementById('searchInput').value = tip;
      query = tip.toLowerCase();
      applyFilters();
        
      const event = new Event('input', { bubbles: true });
      document.getElementById('searchInput').dispatchEvent(event);
        
      document.getElementById('searchInput').focus();
        
      setTimeout(() => {
        tipElement.classList.remove('active');
      }, 2000);
    });
    tipsContainer.appendChild(tipElement);
  });
    
  setTimeout(() => {
    setupSearchTipsScroll();
  }, 50);
}

function showSuggestions(q) {
  const div = document.getElementById('searchSuggestions');
  const matches = invoiceTools.filter(t => {
    const txt = `${t.name} ${t.category} ${t.description[lang]} ${t.features.join(' ')}`.toLowerCase();
    return txt.includes(q);
  }).slice(0, 6);
    
  if (matches.length > 0) {
    div.innerHTML = matches.map(t => `
      <div class="suggestion-item" data-tool="${t.id}">
        <i class="${catIcon(t.category)} suggestion-icon"></i>
        <div class="suggestion-text">
          <div class="suggestion-name">${highlight(t.name, q)}</div>
          <div class="suggestion-meta">${catName(t.category)} ‚Ä¢ ${t.priceDisplay[lang]}</div>
        </div>
      </div>
    `).join('');
      
    div.querySelectorAll('.suggestion-item').forEach(el => {
      el.addEventListener('click', () => {
        const toolId = parseInt(el.dataset.tool);
        const tool = invoiceTools.find(t => t.id === toolId);
        if (tool) {
          document.getElementById('searchInput').value = tool.name;
          query = tool.name.toLowerCase();
          hideSuggestions();
          applyFilters();
          setTimeout(() => {
            const toolElement = document.querySelector(`[data-id="${toolId}"]`);
            if (toolElement) {
              toolElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
              toolElement.style.boxShadow = '0 0 0 2px var(--primary)';
              setTimeout(() => toolElement.style.boxShadow = '', 2000);
            }
          }, 100);
        }
      });
    });
    div.classList.add('active');
  } else {
    hideSuggestions();
  }
}

function hideSuggestions() {
  document.getElementById('searchSuggestions').classList.remove('active');
}

function highlight(txt, q) {
  const rx = new RegExp(`(${q})`, 'gi');
  return txt.replace(rx, '<span style="color:var(--primary-light)">$1</span>');
}

function catIcon(c) {
  const m = {
    basic: 'fas fa-file-invoice',
    advanced: 'fas fa-chart-line',
    mobile: 'fas fa-mobile-alt',
    'all-in-one': 'fas fa-box',
    enterprise: 'fas fa-building'
  };
  return m[c] || 'fas fa-star';
}

function catName(c) {
  const m = {
    basic: translations[lang].catBasic,
    advanced: translations[lang].catAdvanced,
    mobile: translations[lang].catMobile,
    'all-in-one': translations[lang].catAllInOne,
    enterprise: translations[lang].catEnterprise
  };
  return m[c] || c;
}

function updateLang() {
  const t = translations[lang];
  document.getElementById('badgeText').textContent = t.badge(invoiceTools.length);
  document.getElementById('pageTitle').textContent = t.title;
  document.getElementById('pageDescription').textContent = t.desc;
  document.getElementById('searchInput').placeholder = t.searchPlaceholder;
  document.getElementById('searchTipsLabel').textContent = t.searchTipsLabel;
  document.getElementById('navAuto').textContent = t.navAuto;
  document.getElementById('navAutoDesc').textContent = t.navAutoDesc;
  document.getElementById('navTime').textContent = t.navTime;
  document.getElementById('navTimeDesc').textContent = t.navTimeDesc;
  document.getElementById('navIntl').textContent = t.navIntl;
  document.getElementById('navIntlDesc').textContent = t.navIntlDesc;
  document.getElementById('navMobile').textContent = t.navMobile;
  document.getElementById('navMobileDesc').textContent = t.navMobileDesc;
  document.getElementById('navContract').textContent = t.navContract;
  document.getElementById('navContractDesc').textContent = t.navContractDesc;
  document.getElementById('navFree').textContent = t.navFree;
  document.getElementById('navFreeDesc').textContent = t.navFreeDesc;
  document.getElementById('topChartsTitle').textContent = t.topChartsTitle;
  document.getElementById('catAll').textContent = t.catAll;
  document.getElementById('catBasic').textContent = t.catBasic;
  document.getElementById('catAdvanced').textContent = t.catAdvanced;
  document.getElementById('catMobile').textContent = t.catMobile;
  document.getElementById('catAllInOne').textContent = t.catAllInOne;
  document.getElementById('catEnterprise').textContent = t.catEnterprise;
  document.getElementById('toolsText').textContent = t.toolsFound;
  document.getElementById('footerCopy').textContent = t.footerCopy;
  document.getElementById('footerDiscl').textContent = t.footerDiscl;
  document.getElementById('refreshText').textContent = t.refreshText;
  
  // Cookie translations
  document.getElementById('cookieTitle').textContent = t.cookieTitle;
  document.getElementById('cookieText').innerHTML = t.cookieText + ' Weitere Informationen finden Sie in unserer <a href="#" id="privacyLink">' + t.privacy + '</a>.';
  document.getElementById('cookieModalTitle').textContent = t.cookieSettings;
  document.getElementById('cookieNecessaryTitle').textContent = t.cookieNecessaryTitle;
  document.getElementById('cookieNecessaryDesc').textContent = t.cookieNecessaryDesc;
  document.getElementById('cookieAnalyticsTitle').textContent = t.cookieAnalyticsTitle;
  document.getElementById('cookieAnalyticsDesc').textContent = t.cookieAnalyticsDesc;
  document.getElementById('cookieFunctionalTitle').textContent = t.cookieFunctionalTitle;
  document.getElementById('cookieFunctionalDesc').textContent = t.cookieFunctionalDesc;
  document.getElementById('cookieMarketingTitle').textContent = t.cookieMarketingTitle;
  document.getElementById('cookieMarketingDesc').textContent = t.cookieMarketingDesc;
  
  // Update legal links
  document.getElementById('privacyLink').textContent = t.privacy;
  document.getElementById('privacyFooterLink').textContent = t.privacy;
  document.getElementById('imprintLink').textContent = t.imprint;
  document.getElementById('cookieSettingsLink').textContent = t.cookieSettings;

  const pf = document.getElementById('priceFilter');
  pf.innerHTML = `
    <option value="all">${t.priceAll}</option>
    <option value="free">${t.priceFree}</option>
    <option value="paid">${t.pricePaid}</option>
    <option value="freemium">${t.priceFreemium}</option>
    <option value="one-time">${t.priceOneTime}</option>
  `;
  pf.value = price;

  const sf = document.getElementById('sortFilter');
  sf.innerHTML = `
    <option value="votes">${t.sortVotes}</option>
    <option value="popular">${t.sortPopular}</option>
    <option value="rating">${t.sortRating}</option>
    <option value="price-low">${t.sortPriceLow}</option>
    <option value="price-high">${t.sortPriceHigh}</option>
  `;
  sf.value = sort;
}

function renderTopCharts() {
  const container = document.getElementById('topCharts');
    
  const oldTopTools = [...invoiceTools]
    .sort((a, b) => calculateScore(b) - calculateScore(a))
    .slice(0, 5);
    
  oldPositions = {};
  oldTopTools.forEach((tool, index) => {
    oldPositions[tool.id] = index + 1;
  });
    
  const sortedTools = [...invoiceTools]
    .sort((a, b) => calculateScore(b) - calculateScore(a))
    .slice(0, 5);

  container.innerHTML = sortedTools.map((tool, index) => {
    const newPosition = index + 1;
    const oldPosition = oldPositions[tool.id];
    let positionClass = '';
      
    if (lastVotedToolId === tool.id) {
      if (oldPosition && newPosition < oldPosition) {
        positionClass = 'moving-up';
      } else if (oldPosition && newPosition > oldPosition) {
        positionClass = 'moving-down';
      }
    }
      
    return `
    <div class="chart-card ${positionClass}" data-id="${tool.id}" onclick="openToolPopup(${tool.id})">
      <div class="chart-header">
        <div class="chart-rank rank-${newPosition} ${positionClass}">${newPosition}</div>
        <div class="chart-votes">
          <i class="fas fa-thumbs-up"></i>
          <span class="vote-count-display">${tool.votes}</span>
        </div>
      </div>
      <div class="chart-tool-name">${tool.name} ${tool.trending === 'up' ? '<span class="trending-indicator trending-up"><i class="fas fa-arrow-up"></i> Trending</span>' : tool.trending === 'down' ? '<span class="trending-indicator trending-down"><i class="fas fa-arrow-down"></i> Falling</span>' : ''}</div>
      <div class="chart-category">${catName(tool.category)}</div>
      <div class="chart-price">${tool.priceDisplay[lang]}</div>
      <div class="chart-description">${tool.detailedDescription ? tool.detailedDescription[lang] : tool.description[lang]}</div>
      ${tool.pros ? `
      <div class="chart-pros-cons">
        <div class="pros-list"><strong>${translations[lang].pros}</strong> ${tool.pros[lang].slice(0,2).join(', ')}</div>
        <div class="cons-list"><strong>${translations[lang].cons}</strong> ${tool.cons[lang].slice(0,1).join(', ')}</div>
      </div>
      ` : ''}
      <div class="chart-actions">
        <button class="vote-btn up ${tool.userVote === 1 ? 'active' : ''}" data-id="${tool.id}" data-vote="1" onclick="event.stopPropagation(); handleVote(${tool.id}, 1)">
          <i class="fas fa-thumbs-up"></i> ${translations[lang].helpful}
        </button>
        <button class="vote-btn down ${tool.userVote === -1 ? 'active' : ''}" data-id="${tool.id}" data-vote="-1" onclick="event.stopPropagation(); handleVote(${tool.id}, -1)">
          <i class="fas fa-thumbs-down"></i>
        </button>
      </div>
    </div>
  `}).join('');

  setTimeout(() => {
    container.querySelectorAll('.chart-card.moving-up, .chart-card.moving-down').forEach(card => {
      card.classList.remove('moving-up', 'moving-down');
    });
    container.querySelectorAll('.chart-rank.moving-up, .chart-rank.moving-down').forEach(rank => {
      rank.classList.remove('moving-up', 'moving-down');
    });
  }, 1500);
}

function calculateScore(tool) {
  return tool.votes + tool.rating * 10;
}

function applyFilters() {
  let filtered = invoiceTools.filter(tool => {
    if (cat !== 'all' && tool.category !== cat) return false;
    if (price !== 'all' && tool.price !== price) return false;
      
    if (activeUseCase && (!tool.useCases || !tool.useCases.includes(activeUseCase))) {
      return false;
    }
      
    if (query) {
      const txt = `${tool.name} ${tool.category} ${tool.description[lang]} ${tool.features.join(' ')}`.toLowerCase();
      if (!txt.includes(query)) return false;
    }
    return true;
  });

  filtered.sort((a, b) => {
    if (sort === 'rating') return b.rating - a.rating;
    if (sort === 'votes') return calculateScore(b) - calculateScore(a);
    if (sort === 'popular') return (b.badge === 'popular' ? 1 : 0) - (a.badge === 'popular' ? 1 : 0);
    if (sort === 'price-low' || sort === 'price-high') {
      const aPrice = a.priceDisplay[lang].includes('Free') || a.priceDisplay[lang].includes('Kostenlos') ? 0 : 
                    parseFloat(a.priceDisplay[lang].replace(/[^\d.]/g, '')) || 999;
      const bPrice = b.priceDisplay[lang].includes('Free') || b.priceDisplay[lang].includes('Kostenlos') ? 0 : 
                    parseFloat(b.priceDisplay[lang].replace(/[^\d.]/g, '')) || 999;
      return sort === 'price-low' ? aPrice - bPrice : bPrice - aPrice;
    }
    return 0;
  });

  renderTools(filtered);
}

function renderTools(tools) {
  const grid = document.getElementById('toolsGrid');
  const t = translations[lang];
  document.getElementById('toolCount').textContent = tools.length;

  if (tools.length === 0) {
    grid.innerHTML = `
      <div class="empty-state">
        <i class="fas fa-search"></i>
        <h3>${t.noTitle}</h3>
        <p>${t.noMsg}</p>
        <button class="reset-btn" id="resetFiltersBtn">
          <i class="fas fa-redo"></i> ${t.resetBtn}
        </button>
      </div>
    `;
    document.getElementById('resetFiltersBtn').addEventListener('click', resetFilters);
    return;
  }

  grid.innerHTML = tools.map(tool => {
    return `
      <div class="compact-tool-row" data-id="${tool.id}" onclick="openToolPopup(${tool.id})">
        <div class="tool-vote-compact">
          <div class="vote-count ${tool.userVote === 1 ? 'upvoted' : tool.userVote === -1 ? 'downvoted' : ''}">${tool.votes}</div>
          <div>
            <button class="vote-btn-compact up ${tool.userVote === 1 ? 'active' : ''}" data-id="${tool.id}" data-vote="1" onclick="event.stopPropagation(); handleVote(${tool.id}, 1)">
              <i class="fas fa-thumbs-up"></i>
            </button>
            <button class="vote-btn-compact down ${tool.userVote === -1 ? 'active' : ''}" data-id="${tool.id}" data-vote="-1" onclick="event.stopPropagation(); handleVote(${tool.id}, -1)">
              <i class="fas fa-thumbs-down"></i>
            </button>
          </div>
        </div>
        <div class="tool-info-compact">
          <div class="tool-name-row">
            <div class="tool-name-compact">${tool.name}</div>
            <div class="tool-category-compact">${catName(tool.category)}</div>
            ${tool.trending === 'up' ? '<span class="trending-indicator trending-up"><i class="fas fa-arrow-up"></i></span>' : tool.trending === 'down' ? '<span class="trending-indicator trending-down"><i class="fas fa-arrow-down"></i></span>' : ''}
          </div>
          <div class="tool-desc-compact">${tool.detailedDescription ? tool.detailedDescription[lang] : tool.description[lang]}</div>
          ${tool.pros ? `
          <div class="tool-pros-cons-compact">
            <span class="pros">${t.pros}</span>${tool.pros[lang].slice(0,2).join(', ')} 
            <span class="cons">${t.cons}</span>${tool.cons[lang].slice(0,1).join(', ')}
          </div>
          ` : ''}
        </div>
        <div class="tool-meta-compact">
          <div class="tool-price-compact">${tool.priceDisplay[lang]}</div>
          <a href="${tool.link}" class="tool-link-compact" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()">${t.tryNow}</a>
        </div>
      </div>
    `;
  }).join('');
}

function resetFilters() {
  cat = 'all';
  price = 'all';
  sort = 'votes';
  query = '';
  activeUseCase = '';
  document.getElementById('searchInput').value = '';
  document.getElementById('priceFilter').value = 'all';
  document.getElementById('sortFilter').value = 'votes';
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  document.querySelector('[data-scope="all"]').classList.add('active');
  document.querySelectorAll('.quick-card').forEach(c => c.classList.remove('active'));
  applyFilters();
}
</script>
</body>
</html>
